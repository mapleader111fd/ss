<!doctype html>

<html>
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/tailwind.css">
    <script src="js/alpinejs-mask.js" type="text/javascript" defer></script>
    <script src="js/alpine.js" type="text/javascript" defer></script>
    <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css"
          integrity="sha384-AYmEC3Yw5cVb3ZcuHtOA93w35dYTsvhLPVnYs9eStHfGJvOvKxVfELGroGkvsg+p" crossorigin="anonymous"/>
    <script src="js/jquery-3.6.3.min.js" type="text/javascript"></script>
    <script src="js/underscorejs-1.13.6.min.js" type="text/javascript"></script>
    <script src="js/app.js" type="text/javascript"></script>
    <link rel="stylesheet" href="css/style.css">
</head>

<body x-cloak
      x-data="{
        showMenu: false,
        activeTab: 'home',
        isPlayerAdmin: false,
        useVerifiedTracks: false,
        manualCompetitionWaitTime: 30,
        alias: '',
        identifier: '',
        translations: [],
        rating: 0,
        showTrackCreationHelper: false,
        errorMessage: '',
        infoMessage: '',
        isRaceActive: false,
        selectedTrackInfo: {type: 'SPRINT'},
        isTrackCreationAllowed: true,
        isCompetitionCreationAllowed: true,
        vehicleClasses: [],
        recommendedUploadWebsite: null,

        infoNotification(message) {
            this.infoMessage = message;
            var that = this;

            setTimeout(function()
            {
                that.infoMessage = '';
            }, 3000);
        },

        errorNotification(message) {
            this.errorMessage = message;
            var that = this;

            setTimeout(function()
            {
                that.errorMessage = '';
            }, 3000);
        },

        setDefaultPicture(event) {
            event.target.src = 'https://media.rahe.dev/img/defaultprofile.webp';
        }}"
      x-init=""
      @message.window="
        if ($event.data.action == 'hideMenu')  {
            showMenu = false;
        }
        else if ($event.data.action == 'showMenu') {
            showMenu = true;
        }
        else if ($event.data.action == 'setLocale') {
            translations = $event.data.data;
        }
        else if ($event.data.action == 'showTab') {
            activeTab = $event.data.tab;
        }
        else if ($event.data.action == 'loadSharedData') {
            identifier = $event.data.data.identifier;
            alias = $event.data.data.alias;
            rating = $event.data.data.rating;

            isRaceActive = $event.data.data.isRaceActive;
        }
        else if ($event.data.action == 'loadRestrictionData') {
            isTrackCreationAllowed = $event.data.data.isTrackCreationAllowed;
            isCompetitionCreationAllowed = $event.data.data.isCompetitionCreationAllowed;
            isPlayerAdmin = $event.data.data.isPlayerAdmin;
            useVerifiedTracks = $event.data.data.useVerifiedTracks;
            manualCompetitionWaitTime = $event.data.data.manualCompetitionWaitTime;
            recommendedUploadWebsite = $event.data.data.recommendedUploadWebsite;
        }
        else if ($event.data.action == 'showTrackCreationHelper') {
            showTrackCreationHelper = true;
        }
        else if ($event.data.action == 'hideTrackCreationHelper') {
            showTrackCreationHelper = false;
        }
        else if ($event.data.action == 'showTrackCreationHelper') {
            showTrackCreationHelper = true;
        }
        else if ($event.data.action == 'hideTrackCreationHelper') {
            showTrackCreationHelper = false;
        }
        else if ($event.data.action == 'showError') {
            errorNotification($event.data.message);
        }
        else if ($event.data.action == 'showInfo') {
            infoNotification($event.data.message);
        }
        else if ($event.data.action == 'loadOneTimeData') {
            vehicleClasses = $event.data.data;
        }">

<!-- Tablet content area -->
<div x-show="showMenu"
     x-transition
     style="position: absolute; margin: 0 auto; left:2vh; right: 2vh; top: 8vh; width:63.4vw; height:68vh;"
     class="bg-slate-800">

    <div @mouseover="errorMessage = ''"
         x-transition:enter="transition duration-200 transform ease-out"
         x-transition:enter-start="scale-75"
         x-transition:leave="transition duration-100 transform ease-in"
         x-transition:leave-end="opacity-0 scale-90" x-show="errorMessage != ''"
         class="absolute z-10 bg-red-500 py-1.5 text-sm font-medium text-gray-200 w-full text-center">
        <span x-text="errorMessage"></span>
    </div>

    <div @mouseover="infoMessage = ''"
         x-transition:enter="transition duration-500 transform ease-out"
         x-transition:enter-start="scale-75"
         x-transition:leave="transition duration-100 transform ease-in"
         x-transition:leave-end="opacity-0 scale-90" x-show="infoMessage != ''"
         class="absolute z-10 bg-blue-700 py-1.5 text-sm font-medium text-gray-300 w-full text-center">
        <span x-text="infoMessage"></span>
    </div>

    <div id="mainContent" class="h-screen overflow-y-auto bg-gray-900 text-gray-200"
         style="max-height: 100%;">

        <header class="relative">
            <div class="pt-6">
                <nav class="relative max-w-8xl mx-auto flex items-center justify-between px-4 sm:px-6" aria-label="Global">
                    <div class="flex items-center flex-1">
                        <div class="flex items-center justify-between w-full md:w-auto">
                            <a @click="activeTab = 'home'" href="#">
                                <span class="sr-only">Workflow</span>
                                <img class="h-8 w-auto sm:h-10" src="https://tailwindui.com/img/logos/workflow-mark-teal-200-cyan-400.svg"
                                     alt="">
                            </a>
                        </div>

                        <div class="hidden space-x-8 md:flex md:ml-10">
                            <a href="#" @click="activeTab = 'home'; $.post('https://rahe-racing/tabOpened', JSON.stringify({tab: activeTab}))"
                               class="text-base font-medium text-white hover:text-gray-300" x-text="translations.general_header_home"></a>

                            <a href="#" @click="activeTab = 'tracks'; $.post('https://rahe-racing/tabOpened', JSON.stringify({tab: activeTab}))"
                               class="text-base font-medium text-white hover:text-gray-300" x-text="translations.general_header_tracks"></a>

                            <a href="#" @click="activeTab = 'races'; $.post('https://rahe-racing/tabOpened', JSON.stringify({tab: activeTab}))"
                               class="text-base font-medium text-white hover:text-gray-300" x-text="translations.general_header_races"></a>

                            <a href="#" @click="activeTab = 'leaderboard'; $.post('https://rahe-racing/tabOpened', JSON.stringify({tab: activeTab}))"
                               class="text-base font-medium text-white hover:text-gray-300" x-text="translations.general_header_leaderboard"></a>
                        </div>
                    </div>

                    <div class="hidden md:flex md:items-center space-x-2">
                        <a x-show="isRaceActive" href="#"
                           @click="$.post('https://rahe-racing/leaveRace', JSON.stringify({})); isRaceActive = false"
                           class="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-red-600 hover:bg-red-500"
                           x-text="translations.general_header_leave"></a>
                        <a href="#" @click="activeTab = 'profile'; $.post('https://rahe-racing/tabOpened', JSON.stringify({tab: activeTab}))"
                           class="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-gray-700 hover:bg-gray-600"
                           x-text="translations.general_header_profile"></a>
                    </div>
                </nav>
            </div>
        </header>

        <!-- Home tab -->
        <div x-show="activeTab === 'home'" x-data="{ stats: [], events: [] }"
             @message.window="
             if ($event.data.action == 'loadTabData' && $event.data.tab == 'home')  {
                stats = $event.data.data.stats;
                events = $event.data.data.events;
             }">
            <div class="pt-10 bg-gray-900 sm:pt-16 lg:pt-8 lg:overflow-hidden">
                <div class="mx-auto max-w-8xl lg:px-8">
                    <div class="lg:grid lg:grid-cols-10">
                        <div class="col-span-6 mx-auto px-4 sm:px-6 sm:text-center lg:px-0 lg:text-left lg:flex lg:items-center">
                            <div class="lg:py-8">
                                <a href="#"
                                   class="inline-flex items-center text-white bg-black rounded-full p-1 pr-2 sm:text-base lg:text-sm xl:text-base hover:text-gray-200">
                                    <span class="px-3 py-0.5 text-white text-xs font-semibold leading-5 uppercase tracking-wide bg-gradient-to-r from-teal-500 to-cyan-600 rounded-full"
                                          x-text="translations.home_tab_competitions"></span>
                                    <span @click="activeTab = 'races'; $.post('https://rahe-racing/tabOpened', JSON.stringify({tab: activeTab}))"
                                          class="ml-4 text-sm" x-text="translations.home_tab_competitions_day"></span>
                                    <!-- Heroicon name: solid/chevron-right -->
                                    <svg class="ml-2 w-5 h-5 text-gray-500" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"
                                         fill="currentColor" aria-hidden="true">
                                        <path fill-rule="evenodd"
                                              d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z"
                                              clip-rule="evenodd"/>
                                    </svg>
                                </a>
                                <h1 class="mt-12 text-4xl tracking-tight font-extrabold text-white sm:mt-12 sm:text-6xl lg:mt-12 xl:text-6xl">
                                    <span class="block" x-text="translations.home_tab_welcome_text"></span>
                                    <span class="pb-3 block bg-clip-text text-transparent bg-gradient-to-r from-teal-200 to-cyan-400 sm:pb-5"
                                          x-text="alias"></span>
                                </h1>
                                <p class="text-base text-gray-300 sm:text-xl lg:text-lg mt-4"><span
                                        x-text="translations.home_tab_summary_first"></span>
                                    <b><span x-text="stats.lastRace">3</span> <span x-text="translations.home_tab_summary_second"></span></b> <span
                                            x-text="translations.home_tab_summary_third"></span> <b><span x-text="stats.latestPosition">1</span>.
                                        <span x-text="translations.home_tab_summary_fourth"></span></b><span
                                            x-text="translations.home_tab_summary_fifth"></span> <b><span x-text="stats.totalRaces"></span> <span
                                            x-text="translations.home_tab_summary_sixth"></span></b>
                                    <span x-text="translations.home_tab_summary_seventh"></span> <b x-text="rating"></b>.</p>
                            </div>
                        </div>
                        <div class="col-span-4 mt-12 -mb-16 sm:-mb-48 lg:m-0 lg:relative">
                            <div class="mx-auto max-w-md sm:max-w-2xl sm:px-6 lg:max-w-none lg:px-0">
                                <!-- Illustration taken from Lucid Illustrations: https://lucid.pixsellz.io/ -->
                                <img class="w-full lg:pl-16 xl:mt-0 xl:pt-0 lg:absolute lg:inset-y-0 lg:left-0 lg:h-full lg:w-auto lg:max-w-none"
                                     src="https://tailwindui.com/img/component-images/cloud-illustration-teal-cyan.svg" alt="">
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="bg-gray-900 lg:pb-14 lg:overflow-hidden">
                <div class="mx-auto max-w-8xl lg:px-8">
                    <h1 class="mt-12 mb-7 text-4xl tracking-tight font-extrabold text-white sm:mt-12 sm:text-6xl lg:mt-12 xl:text-6xl">
                        <span class="block" x-text="translations.home_tab_events_header"></span>
                    </h1>

                    <div x-show="events.length == 0">
                        <h2 class="text-light tracking-tight text-gray-400" x-text="translations.home_tab_events_none"></h2>
                    </div>

                    <ul role="list" class="grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3">

                        <template x-for="event in events">
                            <li class="col-span-1 bg-gray-800 rounded-lg">
                                <div class="pt-2">
                                    <div class="-mt-px flex divide-x divide-gray-200">
                                        <div class="-ml-px w-0 flex-1 flex">
                                            <a class="relative w-0 flex-1 inline-flex items-center justify-center pt-4 text-sm text-white font-medium border border-transparent rounded-br-lg">
                                                <span class="ml-3 bg-clip-text text-transparent bg-gradient-to-r from-teal-200 to-cyan-400"
                                                      x-texT="event.text"></span>
                                            </a>
                                        </div>
                                    </div>
                                    <div class="-mt-px flex divide-x divide-gray-200">
                                        <div class="-ml-px w-0 flex-1 flex">
                                            <a class="relative w-0 flex-1 inline-flex items-center justify-center pb-4 text-sm text-gray-300 font-normal border border-transparent rounded-br-lg">
                                                <span class="ml-3"><span x-text="event.hours_ago"></span> <span
                                                        x-text="translations.home_tab_event_hours_ago"></span></span>
                                            </a>
                                        </div>
                                    </div>
                                </div>
                                <div class="w-full flex items-center justify-between p-6 py-2 space-x-6">
                                    <div class="flex-1">
                                        <div class="flex items-center space-x-2">
                                            <h3 class="text-white text-sm font-medium" x-text="event.alias"></h3>
                                            <span class="px-3 py-0.3 text-white text-xs font-normal leading-5 tracking-wide bg-gray-600 rounded-full">
                                                <span x-text="translations.home_tab_event_rating"></span><span x-text="event.rating"></span></span>
                                        </div>
                                    </div>
                                    <img class="w-7 h-7 bg-gray-300 rounded-full flex-shrink-0"
                                         :src="event.profile_picture"
                                         @error="setDefaultPicture($event)"
                                         alt="">
                                </div>
                            </li>
                        </template>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Tracks tab -->
        <div x-show="activeTab === 'tracks'"
             x-data="tracksData()"
             @message.window="
             if ($event.data.action == 'loadTabData' && $event.data.tab == 'tracks')  {
                setTracks($event.data.data.tracks, identifier);
             }">
            <div class="pt-10 bg-gray-900 sm:pt-16 lg:pt-8 pt-4 lg:overflow-hidden pb-14">
                <div class="mx-auto max-w-8xl lg:px-8">
                    <div class="col-span-3 mx-auto px-4 sm:px-6 sm:text-center lg:px-0 lg:text-left lg:items-center">
                        <div class="w-fullpb-6">
                            <div class="pb-5 mt-8 sm:flex sm:items-center sm:justify-between">
                                <h2 class="flex text-left text-3xl tracking-tight font-extrabold text-white sm:text-3xl xl:text-3xl">
                                    <span x-text="translations.tracks_tab_tracks" class="block mr-3"></span>

                                    <button @click="if(trackFilter === 'PERSONAL') { setTrackFilter('') } else { setTrackFilter('PERSONAL') }"
                                            type="button"
                                            class="block text-center px-2 py-1 border border-transparent rounded-l shadow-sm text-sm font-medium text-white bg-gray-800"
                                            :class="{'bg-gray-700': trackFilter === 'PERSONAL', 'bg-gray-800': trackFilter !== 'PERSONAL'}">
                                        <div>
                                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-5 h-5">
                                                <path fill-rule="evenodd"
                                                      d="M7.5 6a4.5 4.5 0 119 0 4.5 4.5 0 01-9 0zM3.751 20.105a8.25 8.25 0 0116.498 0 .75.75 0 01-.437.695A18.683 18.683 0 0112 22.5c-2.786 0-5.433-.608-7.812-1.7a.75.75 0 01-.437-.695z"
                                                      clip-rule="evenodd"/>
                                            </svg>
                                        </div>
                                    </button>

                                    <button x-show="useVerifiedTracks"
                                            @click="if(trackFilter === 'VERIFIED') { setTrackFilter('') } else { setTrackFilter('VERIFIED') }"
                                            type="button"
                                            class="block text-center px-2 py-1 border border-transparent shadow-sm text-sm font-medium text-white"
                                            :class="{'bg-gray-700': trackFilter === 'VERIFIED', 'bg-gray-800': trackFilter !== 'VERIFIED'}">
                                        <div>
                                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-5 h-5">
                                                <path fill-rule="evenodd"
                                                      d="M8.603 3.799A4.49 4.49 0 0112 2.25c1.357 0 2.573.6 3.397 1.549a4.49 4.49 0 013.498 1.307 4.491 4.491 0 011.307 3.497A4.49 4.49 0 0121.75 12a4.49 4.49 0 01-1.549 3.397 4.491 4.491 0 01-1.307 3.497 4.491 4.491 0 01-3.497 1.307A4.49 4.49 0 0112 21.75a4.49 4.49 0 01-3.397-1.549 4.49 4.49 0 01-3.498-1.306 4.491 4.491 0 01-1.307-3.498A4.49 4.49 0 012.25 12c0-1.357.6-2.573 1.549-3.397a4.49 4.49 0 011.307-3.497 4.49 4.49 0 013.497-1.307zm7.007 6.387a.75.75 0 10-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 00-1.06 1.06l2.25 2.25a.75.75 0 001.14-.094l3.75-5.25z"
                                                      clip-rule="evenodd"/>
                                            </svg>
                                        </div>
                                    </button>

                                    <button @click="if(trackFilter === 'FAVORITE') { setTrackFilter('') } else { setTrackFilter('FAVORITE') }"
                                            type="button"
                                            class="block text-center px-2 py-1 border border-transparent shadow-sm rounded-r text-sm font-medium text-white bg-gray-800"
                                            :class="{'bg-gray-700': trackFilter === 'FAVORITE', 'bg-gray-800': trackFilter !== 'FAVORITE'}">
                                        <div>
                                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-5 h-5">
                                                <path fill-rule="evenodd"
                                                      d="M10.788 3.21c.448-1.077 1.976-1.077 2.424 0l2.082 5.007 5.404.433c1.164.093 1.636 1.545.749 2.305l-4.117 3.527 1.257 5.273c.271 1.136-.964 2.033-1.96 1.425L12 18.354 7.373 21.18c-.996.608-2.231-.29-1.96-1.425l1.257-5.273-4.117-3.527c-.887-.76-.415-2.212.749-2.305l5.404-.433 2.082-5.006z"
                                                      clip-rule="evenodd"/>
                                            </svg>
                                        </div>
                                    </button>

                                    <span x-show="trackFilter != ''"
                                          class="flex shadow-sm rounded ml-3 px-3 text-sm font-medium text-white bg-gray-800 text-center tracking-normal uppercase">
                                        <div x-show="trackFilter == 'PERSONAL'" x-text="translations.tracks_tab_personal_tracks" class="my-auto">

                                        </div>

                                        <div x-show="trackFilter == 'FAVORITE'" x-text="translations.tracks_tab_favorite_tracks" class="my-auto">

                                        </div>

                                        <div x-show="trackFilter == 'VERIFIED'" x-text="translations.tracks_tab_verified_tracks" class="my-auto">

                                        </div>
                                    </span>

                                    <div x-show="showLoadingSpinner" class="ml-3 my-auto">
                                        <svg aria-hidden="true" class="w-6 h-6 text-gray-200 animate-spin dark:text-gray-600 fill-gray-600"
                                             viewBox="0 0 100 101" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z"
                                                  fill="currentColor"/>
                                            <path d="M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z"
                                                  fill="currentFill"/>
                                        </svg>
                                    </div>
                                </h2>

                                <div class="mt-3 flex sm:mt-0 sm:ml-4">
                                    <h2 class="flex text-right text-3xl tracking-tight font-extrabold text-white sm:text-3xl xl:text-3xl">
                                        <span class="block mr-3"><span x-text="translations.tracks_tab_found_tracks"></span>
                                        <span x-text="filteredTracks.length"></span>
                                        <span x-text="translations.tracks_tab_found_tracks_amount"></span></span>

                                        <div x-transition:enter="transition duration-500 transform ease-out"
                                             x-transition:enter-start="scale-75"
                                             x-transition:leave="transition duration-100 transform ease-in"
                                             x-transition:leave-end="opacity-0 scale-90" class="text-center mr-3" x-show="showTrackSearch">
                                            <input x-data="{ value: ''}" id="trackName" type="text" x-model="value"
                                                   class="shadow-sm p-2 py-1.5 pl-3 text-xs h-full w-full border focus:ring-indigo-500 focus:border-indigo-500 font-bold block border-gray-300 rounded-md text-gray-400"
                                                   :placeholder="translations.tracks_tab_search_track"
                                                   @keyup.enter="setTrackSearch(value)">
                                        </div>
                                        <button @click="showTrackSearch = !showTrackSearch"
                                                type="button"
                                                class="mr-3 text-center px-4 py-1 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-gray-700">
                                            <div>
                                                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 inline-block" fill="none"
                                                     viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                                    <path stroke-linecap="round" stroke-linejoin="round"
                                                          d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
                                                </svg>
                                            </div>
                                        </button>
                                        <button x-show="isTrackCreationAllowed || isPlayerAdmin"
                                                @click="activeTab = 'trackCreation'"
                                                type="button"
                                                class="text-center px-4 py-1 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-gray-700">
                                            <div>
                                                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 inline-block" fill="none"
                                                     viewBox="0 0 24 24"
                                                     stroke="currentColor" stroke-width="2">
                                                    <path stroke-linecap="round" stroke-linejoin="round" d="M12 4v16m8-8H4"/>
                                                </svg>
                                            </div>
                                        </button>
                                    </h2>
                                </div>
                            </div>

                            <ul role="list" class="grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3">
                                <template x-for="track in items">
                                    <li class="col-span-1 bg-gray-800 rounded-lg shadow hover:bg-gray-700"
                                        x-data="{isHover: false}"
                                        @mouseover="isHover = true"
                                        @mouseleave="isHover = false">
                                        <div class="w-full flex items-center justify-between p-6 space-x-6 pb-4">
                                            <div class="flex-1 truncate">
                                                <div class="flex items-center space-x-2">
                                                    <h3 class="text-white text-sm font-medium truncate" x-text="track.name"></h3>

                                                    <div x-show="track.popularTag"
                                                         class="flex items-center inline-block px-2 py-0.5 text-green-800 text-xs font-medium bg-green-200 rounded-full space-x-1">
                                                        <span x-text="translations.tracks_tab_popular_tag"></span>
                                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3 mr-1 inline-block" fill="none"
                                                             viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                                            <path stroke-linecap="round" stroke-linejoin="round" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"/>
                                                        </svg>
                                                    </div>

                                                    <div x-show="track.legendaryTag"
                                                         class="flex items-center inline-block px-2 py-0.5 text-cyan-800 text-xs font-medium bg-cyan-200 rounded-full space-x-1">
                                                        <span x-text="translations.tracks_tab_legendary_tag"></span>
                                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3 inline-block" fill="none"
                                                             viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                                            <path stroke-linecap="round" stroke-linejoin="round" d="M13 10V3L4 14h7v7l9-11h-7z"/>
                                                        </svg>
                                                    </div>

                                                    <div x-show="track.newTag"
                                                         class="flex items-center inline-block px-2 py-0.5 text-yellow-800 text-xs font-medium bg-yellow-200 rounded-full space-x-1">
                                                        <span x-text="translations.tracks_tab_new_tag "></span>
                                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3 inline-block" fill="none"
                                                             viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                                            <path stroke-linecap="round" stroke-linejoin="round"
                                                                  d="M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"/>
                                                        </svg>
                                                    </div>

                                                    <span x-show="useVerifiedTracks && isHover && isPlayerAdmin && track.is_verified != 1"
                                                          @click="if(isPlayerAdmin) { track.is_verified = 1; setVerified(track.id, track.name, 1) }"
                                                          class="flex-shrink-0 inline-block" :class="{'cursor-pointer': isPlayerAdmin}">
                                                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                                                             stroke="currentColor" class="w-5 h-5 text-gray-300">
                                                          <path stroke-linecap="round" stroke-linejoin="round"
                                                                d="M9 12.75L11.25 15 15 9.75M21 12c0 1.268-.63 2.39-1.593 3.068a3.745 3.745 0 01-1.043 3.296 3.745 3.745 0 01-3.296 1.043A3.745 3.745 0 0112 21c-1.268 0-2.39-.63-3.068-1.593a3.746 3.746 0 01-3.296-1.043 3.745 3.745 0 01-1.043-3.296A3.745 3.745 0 013 12c0-1.268.63-2.39 1.593-3.068a3.745 3.745 0 011.043-3.296 3.746 3.746 0 013.296-1.043A3.746 3.746 0 0112 3c1.268 0 2.39.63 3.068 1.593a3.746 3.746 0 013.296 1.043 3.746 3.746 0 011.043 3.296A3.745 3.745 0 0121 12z"/>
                                                        </svg>
                                                    </span>

                                                    <span x-show="useVerifiedTracks && track.is_verified == 1"
                                                          @click="if(isPlayerAdmin) { track.is_verified = 0; setVerified(track.id, track.name, 0) }"
                                                          class="flex-shrink-0 inline-block" :class="{'cursor-pointer': isPlayerAdmin}">
                                                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"
                                                             class="w-5 h-5 text-green-200">
                                                            <path fill-rule="evenodd"
                                                                  d="M8.603 3.799A4.49 4.49 0 0112 2.25c1.357 0 2.573.6 3.397 1.549a4.49 4.49 0 013.498 1.307 4.491 4.491 0 011.307 3.497A4.49 4.49 0 0121.75 12a4.49 4.49 0 01-1.549 3.397 4.491 4.491 0 01-1.307 3.497 4.491 4.491 0 01-3.497 1.307A4.49 4.49 0 0112 21.75a4.49 4.49 0 01-3.397-1.549 4.49 4.49 0 01-3.498-1.306 4.491 4.491 0 01-1.307-3.498A4.49 4.49 0 012.25 12c0-1.357.6-2.573 1.549-3.397a4.49 4.49 0 011.307-3.497 4.49 4.49 0 013.497-1.307zm7.007 6.387a.75.75 0 10-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 00-1.06 1.06l2.25 2.25a.75.75 0 001.14-.094l3.75-5.25z"
                                                                  clip-rule="evenodd"/>
                                                        </svg>
                                                    </span>

                                                    <span x-show="isHover && track.is_favorite != 1"
                                                          @click="track.is_favorite = 1; setFavorite(track.id, track.name, 1)"
                                                          class="flex-shrink-0 inline-block cursor-pointer">
                                                       <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                                                            stroke="currentColor" class="w-5 h-5 text-gray-300">
                                                          <path stroke-linecap="round" stroke-linejoin="round"
                                                                d="M11.48 3.499a.562.562 0 011.04 0l2.125 5.111a.563.563 0 00.475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 00-.182.557l1.285 5.385a.562.562 0 01-.84.61l-4.725-2.885a.563.563 0 00-.586 0L6.982 20.54a.562.562 0 01-.84-.61l1.285-5.386a.562.562 0 00-.182-.557l-4.204-3.602a.563.563 0 01.321-.988l5.518-.442a.563.563 0 00.475-.345L11.48 3.5z"/>
                                                        </svg>
                                                    </span>

                                                    <span x-show="track.is_favorite == 1"
                                                          @click="track.is_favorite = 0; setFavorite(track.id, track.name, 0)"
                                                          class="flex-shrink-0 inline-block cursor-pointer">
                                                       <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"
                                                            class="w-5 h-5 text-yellow-200">>
                                                          <path fill-rule="evenodd"
                                                                d="M10.788 3.21c.448-1.077 1.976-1.077 2.424 0l2.082 5.007 5.404.433c1.164.093 1.636 1.545.749 2.305l-4.117 3.527 1.257 5.273c.271 1.136-.964 2.033-1.96 1.425L12 18.354 7.373 21.18c-.996.608-2.231-.29-1.96-1.425l1.257-5.273-4.117-3.527c-.887-.76-.415-2.212.749-2.305l5.404-.433 2.082-5.006z"
                                                                clip-rule="evenodd"/>
                                                       </svg>
                                                    </span>
                                                </div>

                                                <p class="mt-1 text-gray-300 text-sm truncate" x-text="track.description"></p>
                                            </div>
                                            <img class="w-10 h-10" src="img/track.png" alt="">
                                        </div>
                                        <div>
                                            <div href="#" class="-mt-px flex">
                                                <div class="w-0 flex-1 flex hover:bg-gray-600 rounded-bl-lg"
                                                     @click="activeTab = 'trackInformation';
                                                     $.post('https://rahe-racing/loadTrackInfo', JSON.stringify({trackId: track.id}));
                                                     selectedTrackInfo = {id: track.id, name: track.name, description: track.description, type: track.type, profile_picture: track.profile_picture};">
                                                    <a href="#"
                                                       class="relative -mr-px w-0 flex-1 inline-flex items-center justify-center py-4 text-sm text-gray-300 font-medium border border-transparent rounded-bl-lg hover:text-gray-100">
                                                        <img class="h-5 w-5 rounded-full"
                                                             :src="track.profile_picture"
                                                             @error="setDefaultPicture($event)"
                                                             alt="">
                                                        <span class="ml-3" x-text="translations.tracks_tab_track_information"></span>
                                                    </a>
                                                </div>
                                                <div class="-ml-px w-0 flex-1 flex hover:bg-gray-600 rounded-br-lg"
                                                     @click="activeTab = 'raceCreation'; $dispatch('race-creation-opened', {});
                                                     selectedTrackInfo = {id: track.id, name: track.name, description: track.description, type: track.type, profile_picture: track.profile_picture};">
                                                    <a href="#"
                                                       class="relative w-0 flex-1 inline-flex items-center justify-center py-4 text-sm text-gray-300 font-medium border border-transparent rounded-br-lg hover:text-gray-100">
                                                        <!-- Heroicon name: solid/phone -->
                                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24"
                                                             stroke="currentColor" stroke-width="2">
                                                            <path stroke-linecap="round" stroke-linejoin="round"
                                                                  d="M3 21v-4m0 0V5a2 2 0 012-2h6.5l1 1H21l-3 6 3 6h-8.5l-1-1H5a2 2 0 00-2 2zm9-13.5V9"/>
                                                        </svg>
                                                        <span class="ml-3" x-text="translations.tracks_tab_new_race"></span>
                                                    </a>
                                                </div>
                                            </div>
                                        </div>
                                    </li>
                                </template>

                                <div x-show="observerStarted" class="h-64 col-span-3 flex py-2 text-gray-400 items-center justify-center" id="infinite-scroll-trigger">
                                    <svg class="animate-spin -ml-1 mr-3 h-5 w-5 " xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                                        <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                                        <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                                    </svg>
                                    <span>Loading...</span>
                                </div>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div x-show="activeTab === 'trackInformation'">
            <div class="pt-10 bg-gray-900 sm:pt-16 lg:pt-8 pt-4 lg:overflow-hidden">
                <div class="mx-auto max-w-8xl lg:px-8">
                    <div class="col-span-3 mx-auto px-4 sm:px-6 sm:text-center lg:px-0 lg:text-left lg:flex lg:items-center">
                        <div class="w-full" x-data="{trackInfo: [], leaderBoardEntries: [], selectedFilter: ''}"
                             @message.window="
                             if ($event.data.action == 'loadTrackInfo') {
                                trackInfo = $event.data.data;
                                leaderBoardEntries = trackInfo.leaderBoard;
                                selectedFilter = '';
                             }
                             else if ($event.data.action == 'loadTrackLeaderboard') {
                                leaderBoardEntries = $event.data.leaderboard;
                             }">
                            <div class="pb-5 mt-8 px-8 sm:flex sm:items-center sm:justify-between">
                                <h2 class="flex text-left text-3xl tracking-tight font-extrabold text-white sm:text-3xl xl:text-3xl">
                                    <button @click="activeTab = 'tracks'"
                                            type="button"
                                            class="text-center px-4 py-1 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-gray-700">
                                        <div>
                                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 inline-block" fill="none"
                                                 viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                                <path stroke-linecap="round" stroke-linejoin="round" d="M10 19l-7-7m0 0l7-7m-7 7h18"/>
                                            </svg>
                                        </div>
                                    </button>

                                    <span class="block ml-3" x-text="translations.tracks_tab_details_track_information"></span>
                                </h2>
                                <div>
                                    <button @click="activeTab = 'raceCreation'; $dispatch('race-creation-opened', {});
                                            selectedTrackInfo = {id: trackInfo.id, name: trackInfo.name, description: trackInfo.description, type: trackInfo.type, profile_picture: trackInfo.profile_picture};"
                                            type="button"
                                            class="text-center px-4 ml-3 py-1 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-gray-700">
                                        <div>
                                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2"
                                                 stroke="currentColor" class="w-6 h-6 inline-block">
                                                <path stroke-linecap="round" stroke-linejoin="round"
                                                      d="M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.348a1.125 1.125 0 010 1.971l-11.54 6.347a1.125 1.125 0 01-1.667-.985V5.653z"/>
                                            </svg>
                                        </div>
                                    </button>

                                    <button @click="$.post('https://rahe-racing/setTrackLocation', JSON.stringify({trackId: trackInfo.id}))"
                                            type="button"
                                            class="text-center px-4 py-1 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-gray-700">
                                        <div>
                                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 inline-block" fill="none" viewBox="0 0 24 24"
                                                 stroke="currentColor" stroke-width="2">
                                                <path stroke-linecap="round" stroke-linejoin="round"
                                                      d="M3 21v-4m0 0V5a2 2 0 012-2h6.5l1 1H21l-3 6 3 6h-8.5l-1-1H5a2 2 0 00-2 2zm9-13.5V9"/>
                                            </svg>
                                        </div>
                                    </button>

                                    <button @click="$.post('https://rahe-racing/previewTrack', JSON.stringify({trackId: trackInfo.id}))"
                                            type="button"
                                            class="text-center px-4 py-1 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-gray-700">
                                        <div>
                                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 inline-block" fill="none" viewBox="0 0 24 24"
                                                 stroke="currentColor" stroke-width="2">
                                                <path stroke-linecap="round" stroke-linejoin="round"
                                                      d="M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"/>
                                            </svg>
                                        </div>
                                    </button>

                                    <button x-show="trackInfo.trackCreatorIdentifier == identifier || isPlayerAdmin"
                                            @click="$dispatch('track-deletion-opened', {type: 'track-deletion', id: trackInfo.id});"
                                            type="button"
                                            class="text-center px-4 py-1 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-red-600 hover:bg-red-500">
                                        <div>
                                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 inline-block" fill="none" viewBox="0 0 24 24"
                                                 stroke="currentColor" stroke-width="2">
                                                <path stroke-linecap="round" stroke-linejoin="round"
                                                      d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/>
                                            </svg>
                                        </div>
                                    </button>
                                </div>
                            </div>

                            <div>
                                <div class="relative overflow-hidden mt-8">
                                    <div class="hidden sm:block sm:absolute sm:inset-y-0 sm:h-full sm:w-full" aria-hidden="true">
                                        <div class="relative h-full max-w-7xl mx-auto">
                                            <svg class="absolute right-full transform -translate-y-1/4 translate-x-1/4 lg:translate-x-1/2" width="404"
                                                 height="784" fill="none" viewBox="0 0 404 784">
                                                <defs>
                                                    <pattern id="f210dbf6-a58d-4871-961e-36d5016a0f49" x="0" y="0" width="20" height="20"
                                                             patternUnits="userSpaceOnUse">
                                                        <rect x="0" y="0" width="4" height="4" class="text-gray-600" fill="currentColor"/>
                                                    </pattern>
                                                </defs>
                                                <rect width="404" height="784" fill="url(#f210dbf6-a58d-4871-961e-36d5016a0f49)"/>
                                            </svg>
                                            <svg class="absolute left-full transform -translate-y-3/4 -translate-x-1/4 md:-translate-y-1/2 lg:-translate-x-1/2"
                                                 width="404" height="784" fill="none" viewBox="0 0 404 784">
                                                <defs>
                                                    <pattern id="5d0dd344-b041-4d26-bec4-8d33ea57ec9b" x="0" y="0" width="20" height="20"
                                                             patternUnits="userSpaceOnUse">
                                                        <rect x="0" y="0" width="4" height="4" class="text-gray-600" fill="currentColor"/>
                                                    </pattern>
                                                </defs>
                                                <rect width="404" height="784" fill="url(#5d0dd344-b041-4d26-bec4-8d33ea57ec9b)"/>
                                            </svg>
                                        </div>
                                    </div>

                                    <div class="relative pt-6 pb-16 sm:pb-6">
                                        <main class="mx-auto max-w-7xl px-4">
                                            <div class="text-center">
                                                <span class="inline-flex items-center px-6 py-0.5 rounded-full text-sm font-medium bg-gray-800 text-gray-300">
                                                    <span x-text="trackInfo.checkpointCount" class="pr-1">0</span> <span
                                                        x-text="translations.tracks_tab_details_points"></span>
                                                </span>
                                                <span class="inline-flex items-center px-6 py-0.5 rounded-full text-sm font-medium bg-gray-800 text-gray-300">
                                                    <span x-text="trackInfo.objectCount" class="pr-1">0</span> <span
                                                        x-text="translations.tracks_tab_details_objects"></span>
                                                </span>
                                                <span class="inline-flex items-center px-6 py-0.5 rounded-full text-sm font-medium bg-gray-800 text-gray-300">
                                                    <span x-show="trackInfo.type == 'CIRCUIT'"
                                                          x-text="translations.tracks_tab_details_circuit"></span>
                                                    <span x-show="trackInfo.type == 'SPRINT'" x-text="translations.tracks_tab_details_sprint"></span>
                                                </span>
                                                <h1 class="text-4xl tracking-tight font-extrabold text-white sm:text-5xl md:text-6xl">
                                                    <span class="block xl:inline" x-text="trackInfo.name"></span>
                                                </h1>
                                                <p class="mt-3 max-w-md mx-auto text-base text-gray-300 sm:text-lg md:mt-5 md:text-xl md:max-w-3xl"
                                                   x-text="trackInfo.description"></p>
                                            </div>
                                        </main>
                                    </div>
                                </div>

                                <div class="mt-4 px-16">
                                    <div class="relative">
                                        <div class="absolute inset-0 h-1/2"></div>
                                        <div class="relative mx-auto">
                                            <div class="min-w-full mx-auto">
                                                <dl class="rounded-lg bg-gray-800 shadow-lg sm:grid sm:grid-cols-3">
                                                    <div class="flex flex-col px-6 py-4 text-center sm:border-0">
                                                        <dt class="order-2 mt-2 text-sm leading-6 font-medium text-gray-300"
                                                            x-text="translations.tracks_tab_details_times_driven"></dt>
                                                        <dd x-text="trackInfo.raceCount" class="order-1 text-3xl font-extrabold text-white">0
                                                        </dd>
                                                    </div>
                                                    <div class="flex flex-col px-6 py-4 text-center">
                                                        <dt class="order-2 mt-2 text-sm leading-6 font-medium text-gray-300"
                                                            x-text="translations.tracks_tab_details_finish_percentage"></dt>
                                                        <dd class="order-1 text-3xl font-extrabold text-white"><span
                                                                x-text="trackInfo.finishPercentage">0</span>%
                                                        </dd>
                                                    </div>
                                                    <div class="flex flex-col border-gray-600 px-6 py-4 text-center">
                                                        <dt class="order-2 mt-2 text-sm leading-6 font-medium text-gray-300"
                                                            x-text="translations.tracks_tab_details_people_finished"></dt>
                                                        <dd class="order-1 text-3xl font-extrabold text-white"><span
                                                                x-text="trackInfo.participants">0</span></dd>
                                                    </div>
                                                </dl>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="px-8 pb-2 mx-8 pt-16 sm:flex sm:items-center sm:justify-between text-white">
                                <div class="text-left text-xl font-bold">
                                    <span x-text="translations.tracks_tab_details_filter_best_results"></span>
                                </div>

                                <div>
                                    <button @click="selectedFilter = ''; $.post('https://rahe-racing/filterTrackResults', JSON.stringify({}));"
                                            :class="{ 'bg-gray-700': selectedFilter === '', 'bg-gray-800': selectedFilter !== ''}" type="button"
                                            class="text-center px-4 ml-3 py-1 border border-transparent rounded-md shadow-lg text-sm font-medium bg-gray-800 hover:bg-gray-700"
                                            x-text="translations.tracks_tab_details_filter_all">
                                    </button>

                                    <template x-for="vehicleClass in vehicleClasses">
                                        <button @click="selectedFilter = vehicleClass; $.post('https://rahe-racing/filterTrackResults', JSON.stringify({class: vehicleClass}));"
                                                :class="{ 'bg-gray-700': selectedFilter === vehicleClass, 'bg-gray-800': selectedFilter !== vehicleClass}"
                                                x-text="vehicleClass" type="button"
                                                class="text-center px-4 ml-3 py-1 border border-transparent rounded-md shadow-lg text-sm font-medium bg-gray-800 hover:bg-gray-700">
                                        </button>
                                    </template>
                                </div>
                            </div>

                            <div class="px-4 sm:px-6 lg:px-8 pb-12">
                                <div class="flex flex-col">
                                    <div class="-my-2 -mx-4 overflow-x-auto sm:-mx-6 lg:-mx-8">
                                        <div class="inline-block min-w-full py-2 align-middle md:px-6 lg:px-16">
                                            <div class="overflow-hidden shadow ring-1 ring-black ring-opacity-5 md:rounded-lg">
                                                <table class="min-w-full">
                                                    <tbody class="bg-gray-800 text-center">

                                                    <template x-for="entry in leaderBoardEntries">
                                                        <tr>
                                                            <td class="whitespace-nowrap py-2 pl-4 pr-3 text-sm text-gray-300 sm:pl-6">
                                                                <img class="h-10 w-10 rounded-full"
                                                                     :src="entry.profile_picture"
                                                                     @error="setDefaultPicture($event)"
                                                                     alt="">
                                                            </td>
                                                            <td x-text="entry.alias"
                                                                class="whitespace-nowrap py-2 pl-4 pr-3 text-sm text-gray-300 sm:pl-6">
                                                            </td>
                                                            <td x-text="entry.best_time_string"
                                                                class="whitespace-nowrap px-2 py-2 text-sm text-gray-300">
                                                            </td>
                                                            <td x-text="entry.vehicle_model_name"
                                                                class="whitespace-nowrap px-2 py-2 text-sm text-gray-300">
                                                            </td>
                                                            <td x-text="entry.vehicle_class"
                                                                class="whitespace-nowrap px-2 py-2 text-sm text-gray-300">
                                                            </td>
                                                            <td x-text="entry.finished_at"
                                                                class="whitespace-nowrap px-2 py-2 text-sm text-gray-300">
                                                            </td>
                                                        </tr>
                                                    </template>

                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div x-show="activeTab === 'trackCreation'">
            <div class="pt-10 bg-gray-900 sm:pt-16 lg:pt-8 pt-4 lg:overflow-hidden">
                <div class="mx-auto max-w-8xl lg:px-8">
                    <div class="col-span-3 mx-auto px-4 sm:px-6 sm:text-center lg:px-0 lg:text-left lg:flex lg:items-center">
                        <div class="w-full"
                             x-data="{trackPointAmount: 0, trackObjectAmount: 0, trackName: '', trackDescription: '', isRecordingTrack: false, selectedTrackType: ''}"
                             @message.window="
                             if ($event.data.action == 'updateTrackCreationInfo') {
                                trackPointAmount = $event.data.trackPointAmount;
                                trackObjectAmount = $event.data.trackObjectAmount;
                             }">
                            <div class="pb-5 mt-8 px-8 sm:flex sm:items-center sm:justify-between">
                                <h2 class="flex text-left text-3xl tracking-tight font-extrabold text-white sm:text-3xl xl:text-3xl">
                                    <button @click="activeTab = 'tracks'; isRecordingTrack = false; $.post('https://rahe-racing/pauseTrackRecording');"
                                            type="button"
                                            class="text-center px-4 py-1 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-gray-700">
                                        <div>
                                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 inline-block" fill="none"
                                                 viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                                <path stroke-linecap="round" stroke-linejoin="round" d="M10 19l-7-7m0 0l7-7m-7 7h18"/>
                                            </svg>
                                        </div>
                                    </button>
                                    <span class="block ml-3" x-text="translations.tracks_tab_new_page_header"></span>
                                </h2>
                            </div>

                            <div>
                                <div class="relative pt-8">
                                    <div class="absolute inset-0">
                                        <div class="absolute inset-y-0 left-0 w-1/2"></div>
                                    </div>
                                    <div class="relative lg:grid lg:grid-cols-5">
                                        <div class="px-4 sm:px-6 lg:col-span-2 lg:px-8 xl:pr-12">
                                            <div class="max-w-lg mx-auto">
                                                <h2 class="text-2xl font-extrabold tracking-tight text-whitesm:text-3xl"
                                                    x-text="translations.tracks_tab_new_info_header"></h2>
                                                <p class="mt-3 text-lg leading-6 text-gray-300"
                                                   x-text="translations.tracks_tab_new_info_description"></p>
                                            </div>
                                        </div>
                                        <div class="px-4 sm:px-6 lg:col-span-3 xl:pl-12 lg:pr-12">
                                            <div class="max-w-lg mx-auto lg:max-w-none">
                                                <form action="#" method="POST" class="grid grid-cols-2 gap-y-4 gap-x-4">
                                                    <div>
                                                        <input x-model="trackName" type="text" name="track-name"
                                                               class="block w-full shadow-sm py-2 px-4 text-sm text-gray-600 focus:ring-indigo-500 focus:border-indigo-500 border-gray-300 rounded-md"
                                                               :placeholder="translations.tracks_tab_new_info_name_input">
                                                    </div>
                                                    <div>
                                                        <input x-model="trackDescription" id="email" name="track-description"
                                                               class="block w-full shadow-sm py-2 px-4 text-sm text-gray-600 focus:ring-indigo-500 focus:border-indigo-500 border-gray-300 rounded-md"
                                                               :placeholder="translations.tracks_tab_new_info_description_input">
                                                    </div>

                                                    <div class="col-span-2">
                                                            <span class="relative z-0 inline-flex shadow-sm rounded-md w-full">
                                                              <button type="button" @click="selectedTrackType = 'SPRINT'"
                                                                      x-text="translations.tracks_tab_new_info_track_type_sprint"
                                                                      :class="{ 'bg-gray-500': selectedTrackType === 'SPRINT', 'bg-gray-700': selectedTrackType !== 'SPRINT'}"
                                                                      class="w-full relative items-center px-4 py-2 rounded-l-md border-r border-gray-600 text-sm font-medium text-gray-200 hover:bg-gray-500 ">
                                                              </button>
                                                              <button type="button" @click="selectedTrackType = 'CIRCUIT'"
                                                                      x-text="translations.tracks_tab_new_info_track_type_circuit"
                                                                      :class="{ 'bg-gray-500': selectedTrackType === 'CIRCUIT', 'bg-gray-700': selectedTrackType !== 'CIRCUIT'}"
                                                                      class="w-full relative items-center px-4 py-2 rounded-r-md border-l border-gray-600 text-sm font-medium text-gray-200 hover:bg-gray-500 -ml-px">
                                                              </button>
                                                            </span>
                                                    </div>
                                                </form>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="relative pt-16">
                                    <div class="absolute inset-0">
                                        <div class="absolute inset-y-0 left-0 w-1/2"></div>
                                    </div>
                                    <div class="relative">
                                        <div class="px-4 pb-8 sm:px-6 lg:px-8 lg:pt-0 xl:pr-12">
                                            <div>
                                                <div class="pb-5 mt-4 sm:flex sm:items-center sm:justify-between">
                                                    <h2 class="text-2xl font-extrabold tracking-tight text-whitesm:text-3xl"
                                                        x-text="translations.tracks_tab_new_object_header"></h2>
                                                    <div class="flex sm:mt-0 sm:ml-4">
                                                        <h2 class="flex text-right text-3xl tracking-tight font-extrabold text-white sm:text-3xl xl:text-3xl">
                                                            <button @click="$.post('https://rahe-racing/deleteCreatedTrack', JSON.stringify({}));"
                                                                    type="button"
                                                                    class="text-center px-4 py-1 mr-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-red-600 hover:bg-red-500">
                                                                <div>
                                                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 inline-block" fill="none"
                                                                         viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                                                        <path stroke-linecap="round" stroke-linejoin="round"
                                                                              d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/>
                                                                    </svg>
                                                                    <span class="ml-1"><span
                                                                            x-text="translations.tracks_tab_new_object_delete_1"></span>(<span
                                                                            x-text="trackPointAmount">0</span>) <span
                                                                            x-text="translations.tracks_tab_new_object_delete_2"></span> (<span
                                                                            x-text="trackObjectAmount">0</span>)</span>
                                                                </div>
                                                            </button>

                                                            <button @click="isRecordingTrack = !isRecordingTrack; $.post('https://rahe-racing/toggleTrackRecording', JSON.stringify({status: isRecordingTrack}));"
                                                                    type="button"
                                                                    :class="{ 'bg-green-600 hover:bg-green-500': !isRecordingTrack, 'bg-red-600 hover:bg-red-500': isRecordingTrack}"
                                                                    class="text-center px-4 py-1 border border-transparent rounded-md shadow-sm text-sm font-medium text-white">
                                                                <div>
                                                                    <svg x-show="!isRecordingTrack" xmlns="http://www.w3.org/2000/svg"
                                                                         class="h-5 w-5 inline-block" fill="none" viewBox="0 0 24 24"
                                                                         stroke="currentColor" stroke-width="2">
                                                                        <path stroke-linecap="round" stroke-linejoin="round"
                                                                              d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"/>
                                                                        <path stroke-linecap="round" stroke-linejoin="round"
                                                                              d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                                                                    </svg>
                                                                    <svg x-show="isRecordingTrack" xmlns="http://www.w3.org/2000/svg"
                                                                         class="h-5 w-5 inline-block" fill="none" viewBox="0 0 24 24"
                                                                         stroke="currentColor" stroke-width="2">
                                                                        <path stroke-linecap="round" stroke-linejoin="round"
                                                                              d="M10 9v6m4-6v6m7-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
                                                                    </svg>
                                                                    <span x-text="isRecordingTrack ? translations.tracks_tab_new_object_mode_pause: translations.tracks_tab_new_object_mode_start"
                                                                          class="ml-1"></span>
                                                                </div>
                                                            </button>
                                                        </h2>
                                                    </div>
                                                </div>
                                                <p class="text-lg leading-6 text-gray-300"
                                                   x-text="translations.tracks_tab_new_object_description"></p>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="w-full lg:mt-36 lg:pt-2">
                                    <button @click="$.post('https://rahe-racing/finishTrackRecording', JSON.stringify({trackName: trackName, trackDescription: trackDescription, trackType: selectedTrackType}));"
                                            type="button"
                                            class="w-full text-center px-4 py-3 border border-transparent rounded-md shadow-sm text-lg font-medium text-white bg-gray-700 hover:bg-gray-600">
                                        <div>
                                            <span class="ml-3" x-text="translations.tracks_tab_new_create_button"></span>
                                        </div>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div x-show="activeTab === 'raceCreation'"
             x-data="{
             selectedCompetitionType: 'NORMAL',
             searchCompetitionTracks: [],
             selectedCompetitionTracks: [],
             competitionSeriesExpanded: false,

             hiddenTrackAmount: 0,
             minutesFromNow: manualCompetitionWaitTime,
             minutesFromNowTime: '00:00',

             padNumber(number) {
                return String(number).padStart(2, '0');
             },

             updateMinutesFromNowTime() {
                function addMinutes(date, minutes) {
                    return new Date(date.getTime() + minutes * 60000);
                }

                const date = addMinutes(new Date(), this.minutesFromNow);

                let hour = this.padNumber(date.getHours());
                let minute = this.padNumber(date.getMinutes());

                this.minutesFromNowTime = hour + ':' + minute;
             },

             updateMinutesFromNow() {
                if (this.minutesFromNow < manualCompetitionWaitTime) {
                    var errorMessage = translations.notification_tablet_error_track_invalid_start;
                    errorNotification(errorMessage.replace(/%s/g, manualCompetitionWaitTime));
                    this.minutesFromNow = manualCompetitionWaitTime;
                }

                this.updateMinutesFromNowTime();
             }}"

             @race-creation-opened.window="updateMinutesFromNowTime();"

             @message.window="
             if ($event.data.action == 'loadCompetitionTrackSearchResults')  {
                searchCompetitionTracks = $event.data.tracks;
                hiddenTrackAmount = $event.data.hiddenTrackAmount;
             }
             else if ($event.data.action == 'addSelectedCompetitionTrack')  {
                selectedCompetitionTracks.push($event.data.data);
                competitionSeriesExpanded = false;
                updateMinutesFromNowTime();
             }
             else if ($event.data.action == 'resetCompetitionData') {
                selectedCompetitionType = 'NORMAL';
                hiddenTrackAmount = 0;
                searchCompetitionTracks = [];
                selectedCompetitionTracks = [];
                competitionSeriesExpanded = false;
             }">
            <div class="pt-10 bg-gray-900 sm:pt-16 lg:pt-8 pt-4 lg:overflow-hidden">
                <div class="mx-auto max-w-8xl lg:px-8">
                    <div class="col-span-3 mx-auto px-4 sm:px-6 sm:text-center lg:px-0 lg:text-left lg:flex lg:items-center">
                        <div class="w-full">
                            <div class="pb-5 mt-8 px-8 sm:flex sm:items-center sm:justify-between">
                                <h2 class="flex text-left text-3xl tracking-tight font-extrabold text-white sm:text-3xl xl:text-3xl">
                                    <button @click="activeTab = 'tracks'"
                                            type="button"
                                            class="text-center px-4 py-1 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-gray-700">
                                        <div>
                                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 inline-block" fill="none"
                                                 viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                                <path stroke-linecap="round" stroke-linejoin="round" d="M10 19l-7-7m0 0l7-7m-7 7h18"/>
                                            </svg>
                                        </div>
                                    </button>
                                    <span class="block ml-3" x-text="translations.tracks_tab_race_title"></span>
                                </h2>
                            </div>

                            <div x-data="{selectedClass: '', startTime: 15, endTime: 180, participationFee: 0, lapAmount: 1}">
                                <div class="relative pt-8">
                                    <div class="relative lg:grid lg:grid-cols-5">
                                        <div class="px-4 sm:px-6 lg:col-span-2 lg:px-8 xl:pr-12 pt-7">
                                            <div class="max-w-lg mx-auto text-center">
                                                <h2 class="text-2xl font-extrabold text-centracking-tight text-whitesm:text-3xl"
                                                    x-text="translations.tracks_tab_race_header"></h2>
                                                <p class="mt-3 text-lg leading-6 text-gray-300" x-text="translations.tracks_tab_race_description"></p>
                                            </div>
                                        </div>
                                        <div class="px-4 sm:px-6 lg:col-span-3 xl:pl-12 lg:pr-12">
                                            <div class="max-w-lg mx-auto lg:max-w-none">
                                                <form action="#" method="POST" class="grid grid-cols-6 gap-y-4 gap-x-4">
                                                    <div x-show="selectedCompetitionType == 'NORMAL'"
                                                         :class="{'col-span-3': !isCompetitionCreationAllowed, 'col-span-2': isCompetitionCreationAllowed}">
                                                        <label class="text-xs" x-text="translations.tracks_tab_race_start_time"></label>
                                                        <input type="number"
                                                               class="block w-full shadow-sm py-2 px-4 text-sm text-gray-700 rounded-md"
                                                               placeholder=""
                                                               x-model="startTime">
                                                    </div>
                                                    <div x-show="selectedCompetitionType == 'NORMAL'"
                                                         :class="{'col-span-3': !isCompetitionCreationAllowed, 'col-span-2': isCompetitionCreationAllowed}">
                                                        <label class="text-xs" x-text="translations.tracks_tab_race_dnf_time"></label>
                                                        <input type="number"
                                                               class="block w-full shadow-sm py-2 px-4 text-sm text-gray-600 focus:ring-indigo-500 focus:border-indigo-500 border-gray-300 rounded-md"
                                                               placeholder=""
                                                               x-model="endTime">
                                                    </div>

                                                    <div x-show="isCompetitionCreationAllowed"
                                                         :class="{'col-span-2': selectedCompetitionType == 'NORMAL', 'col-span-6': selectedCompetitionType == 'COMPETITION'}">
                                                        <label class="text-xs" x-text="translations.tracks_tab_new_race_type"></label>
                                                        <span class="relative z-0 inline-flex shadow-sm rounded-md w-full">
                                                              <button type="button" @click="selectedCompetitionType = 'NORMAL'"
                                                                      x-text="translations.tracks_tab_new_race_type_normal"
                                                                      :class="{ 'bg-gray-500': selectedCompetitionType === 'NORMAL', 'bg-gray-700': selectedCompetitionType !== 'NORMAL'}"
                                                                      class="w-full relative items-center px-4 py-2 rounded-l-md border-r border-gray-600 text-sm font-medium text-gray-200 hover:bg-gray-500 ">
                                                              </button>
                                                              <button type="button"
                                                                      @click="updateMinutesFromNowTime(); selectedCompetitionType = 'COMPETITION'"
                                                                      x-text="translations.tracks_tab_new_race_type_competition"
                                                                      :class="{ 'bg-gray-500': selectedCompetitionType === 'COMPETITION', 'bg-gray-700': selectedCompetitionType !== 'COMPETITION'}"
                                                                      class="w-full relative items-center px-4 py-2 rounded-r-md border-l border-gray-600 text-sm font-medium text-gray-200 hover:bg-gray-500 -ml-px">
                                                              </button>
                                                            </span>
                                                    </div>

                                                    <div class="col-span-1">
                                                        <label class="text-xs"
                                                               x-text="selectedCompetitionType == 'NORMAL' ? translations.tracks_tab_race_fee : translations.tracks_tab_race_prize_pool"></label>
                                                        <input type="number"
                                                               class="block w-full shadow-sm py-2 px-4 text-sm text-gray-600 focus:ring-indigo-500 focus:border-indigo-500 border-gray-300 rounded-md"
                                                               placeholder=""
                                                               x-model="participationFee">
                                                    </div>

                                                    <div x-show="selectedCompetitionType == 'COMPETITION'" class="col-span-1">
                                                        <label class="text-xs" x-text="translations.tracks_tab_race_competition_start_time"></label>
                                                        <div class="flex items-center text-sm rounded-md shadow-sm text-gray-600 p-2 bg-white">
                                                            <input x-model="minutesFromNow" x-on:change.debounce="updateMinutesFromNow()" x-mask="999"
                                                                   class="flex-1 text-center w-full  [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none"
                                                                   placeholder="">

                                                            <span class="flex-1 text-center">min</span>
                                                        </div>
                                                    </div>

                                                    <div x-show="selectedCompetitionType == 'NORMAL' && selectedTrackInfo.type === 'CIRCUIT'"
                                                         class="col-span-1">
                                                        <label class="text-xs" x-text="translations.tracks_tab_laps"></label>
                                                        <input type="number"
                                                               class="block w-full shadow-sm py-2 px-4 text-sm text-gray-600 focus:ring-indigo-500 focus:border-indigo-500 border-gray-300 rounded-md"
                                                               placeholder=""
                                                               x-model="lapAmount">
                                                    </div>

                                                    <div :class="{ 'col-span-4': (selectedTrackInfo.type === 'CIRCUIT' && selectedCompetitionType == 'NORMAL') || selectedCompetitionType == 'COMPETITION', 'col-span-5': selectedTrackInfo.type === 'SPRINT' && selectedCompetitionType != 'COMPETITION'}">
                                                        <label class="text-xs" x-text="translations.tracks_tab_race_class"></label>
                                                        <span class="relative z-0 inline-flex shadow-sm rounded-md w-full">
                                                              <button type="button" @click="selectedClass = ''"
                                                                      :class="{ 'bg-gray-500': selectedClass === '', 'bg-gray-700': selectedClass !== ''}"
                                                                      x-text="translations.tracks_tab_race_class_none"
                                                                      class="w-full relative items-center px-4 py-2 rounded-l-md border-r border-gray-600 text-sm font-medium text-gray-200 hover:bg-gray-500 ">
                                                              </button>
                                                              <template x-for="vehicleClass in vehicleClasses">
                                                                  <button x-text="vehicleClass" type="button" @click="selectedClass = vehicleClass"
                                                                          :class="{ 'bg-gray-500': selectedClass === vehicleClass, 'bg-gray-700': selectedClass !== vehicleClass}"
                                                                          class="w-full relative items-center px-4 py-2 border-r border-gray-600 text-sm font-medium text-gray-200 hover:bg-gray-500 ">
                                                                  </button>
                                                              </template>
                                                        </span>
                                                    </div>
                                                </form>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div x-show="selectedCompetitionType == 'COMPETITION'" class="relative pt-8">
                                    <div class="relative lg:grid lg:grid-cols-5">
                                        <div class="px-4 sm:px-6 lg:col-span-2 lg:px-8 xl:pr-12 pt-7">
                                            <div class="max-w-lg mx-auto text-center">
                                                <h2 class="text-2xl font-extrabold text-center tracking-tight text-whitesm:text-3xl"
                                                    x-text="translations.tracks_tab_race_comp_header"></h2>
                                                <p class="mt-3 text-lg leading-6 text-gray-300"
                                                   x-text="translations.tracks_tab_race_comp_description"></p>
                                            </div>
                                        </div>
                                        <div class="px-4 sm:px-6 lg:col-span-3 xl:pl-12 lg:pr-12">
                                            <div class="max-w-lg mx-auto lg:max-w-none">
                                                <ul role="list" class="divide-y divide-white/5 mb-6">
                                                    <li class="py-4 px-2">
                                                        <div class="flex items-center gap-x-3">
                                                            <img :src="selectedTrackInfo.profile_picture" @error="setDefaultPicture($event)" alt=""
                                                                 class="h-6 w-6 flex-none rounded-full bg-gray-800">
                                                            <h3 class="truncate text-sm font-semibold leading-6 text-white"
                                                                x-text="selectedTrackInfo.name"></h3>
                                                            <div class="flex-auto">
                                                                <button x-show="selectedTrackInfo.type == 'CIRCUIT'"
                                                                        @track-laps-updated.window="if($event.detail.index == -1) { selectedTrackInfo.laps = $event.detail.laps }"
                                                                        @click="$dispatch('track-configuration-opened', {index: -1, laps: selectedTrackInfo.laps})"
                                                                        class="items-center gap-x-1.5 rounded-md bg-gray-600 p-1 text-sm font-semibold text-white shadow-sm hover:bg-gray-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-gray-600"
                                                                        type="button">
                                                                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-3 h-3">
                                                                        <path stroke-linecap="round" stroke-linejoin="round" d="M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.324.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.003.827c-.293.24-.438.613-.431.992a6.759 6.759 0 010 .255c-.007.378.138.75.43.99l1.005.828c.424.35.534.954.26 1.43l-1.298 2.247a1.125 1.125 0 01-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.57 6.57 0 01-.22.128c-.331.183-.581.495-.644.869l-.213 1.28c-.09.543-.56.941-1.11.941h-2.594c-.55 0-1.02-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 01-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 01-1.369-.49l-1.297-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.292-.24.437-.613.43-.992a6.932 6.932 0 010-.255c.007-.378-.138-.75-.43-.99l-1.004-.828a1.125 1.125 0 01-.26-1.43l1.297-2.247a1.125 1.125 0 011.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.644-.869l.214-1.281z" />
                                                                        <path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                                                                    </svg>
                                                                </button>
                                                            </div>
                                                            <time class="flex-none text-xs text-gray-500"
                                                                  x-text="translations.tracks_tab_race_approximate_start + ' ' + minutesFromNowTime"></time>
                                                        </div>
                                                        <div class="mt-1 flex items-center gap-x-3">
                                                            <p class="flex-auto truncate text-sm text-gray-500"
                                                               x-text="selectedTrackInfo.description"></p>
                                                            <span class="inline-flex items-center rounded-md bg-gray-700 px-2 py-0.5 text-xs font-medium text-gray-400 ring-1 ring-inset ring-gray-500/10"
                                                                  x-text="selectedTrackInfo.type == 'SPRINT' ? translations.tracks_tab_new_info_track_type_sprint : translations.tracks_tab_new_info_track_type_circuit"></span>
                                                        </div>
                                                    </li>

                                                    <template x-for="(selectedCompetitionTrack, index) in selectedCompetitionTracks">
                                                        <li x-transition class="py-4 px-2">
                                                            <div class="flex items-center gap-x-3">
                                                                <img :src="selectedCompetitionTrack.profile_picture"
                                                                     @error="setDefaultPicture($event)" alt=""
                                                                     class="h-6 w-6 flex-none rounded-full bg-gray-800">
                                                                <h3 class="flex truncate text-sm font-semibold leading-6 text-white"
                                                                    x-text="selectedCompetitionTrack.name"></h3>
                                                                <div class="flex-auto">
                                                                    <button x-show="selectedCompetitionTrack.type == 'CIRCUIT'"
                                                                            @track-laps-updated.window="if($event.detail.index == index) { selectedCompetitionTrack.laps = $event.detail.laps }"
                                                                            @click="$dispatch('track-configuration-opened', {index: index, laps: selectedCompetitionTrack.laps})"
                                                                            class="items-center gap-x-1.5 rounded-md bg-gray-600 p-1 text-sm font-semibold text-white shadow-sm hover:bg-gray-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-gray-600"
                                                                            type="button">
                                                                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-3 h-3">
                                                                            <path stroke-linecap="round" stroke-linejoin="round" d="M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.324.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.003.827c-.293.24-.438.613-.431.992a6.759 6.759 0 010 .255c-.007.378.138.75.43.99l1.005.828c.424.35.534.954.26 1.43l-1.298 2.247a1.125 1.125 0 01-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.57 6.57 0 01-.22.128c-.331.183-.581.495-.644.869l-.213 1.28c-.09.543-.56.941-1.11.941h-2.594c-.55 0-1.02-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 01-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 01-1.369-.49l-1.297-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.292-.24.437-.613.43-.992a6.932 6.932 0 010-.255c.007-.378-.138-.75-.43-.99l-1.004-.828a1.125 1.125 0 01-.26-1.43l1.297-2.247a1.125 1.125 0 011.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.644-.869l.214-1.281z" />
                                                                            <path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                                                                        </svg>
                                                                    </button>

                                                                    <button @click="selectedCompetitionTracks = _.without(selectedCompetitionTracks, selectedCompetitionTrack)"
                                                                            class="items-center gap-x-1.5 rounded-md bg-red-600 p-1 text-sm font-semibold text-white shadow-sm hover:bg-red-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-red-600"
                                                                            type="button">
                                                                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                                                                             stroke-width="1.5" stroke="currentColor" class="w-3 h-3">
                                                                            <path stroke-linecap="round" stroke-linejoin="round"
                                                                                  d="M6 18L18 6M6 6l12 12"/>
                                                                        </svg>
                                                                    </button>
                                                                </div>
                                                                <span class="flex-none text-xs text-gray-500"
                                                                      x-text="translations.tracks_tab_race_estimated_duration + ' ' + selectedCompetitionTrack.bestTime * selectedCompetitionTrack.laps + translations.tracks_tab_race_estimated_duration_minutes">
                                                                </span>
                                                            </div>
                                                            <div class="mt-1 flex items-center gap-x-3">
                                                                <p class="flex-auto truncate text-sm text-gray-500"
                                                                   x-text="selectedCompetitionTrack.description"></p>
                                                                <span class="inline-flex items-center rounded-md bg-gray-700 px-2 py-0.5 text-xs font-medium text-gray-400 ring-1 ring-inset ring-gray-500/10"
                                                                      x-text="selectedCompetitionTrack.type == 'SPRINT' ? translations.tracks_tab_new_info_track_type_sprint : translations.tracks_tab_new_info_track_type_circuit"></span>
                                                            </div>
                                                        </li>
                                                    </template>
                                                </ul>

                                                <button x-show="!competitionSeriesExpanded" @click="competitionSeriesExpanded = true" type="button"
                                                        class="relative block w-full rounded-lg border-2 border-dashed border-gray-800 px-4 py-3 text-center hover:border-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-700 focus:ring-offset-2">
                                                    <span class="block text-sm font-semibold text-gray-300"
                                                          x-text="translations.tracks_tab_race_add_race"></span>
                                                </button>

                                                <input x-show="competitionSeriesExpanded" type="text" x-data="{ value: ''}" x-model="value"
                                                       spellcheck="false"
                                                       class="shadow-sm px-4 py-3 text-sm border-2 border-gray-700 bg-gray-700 block w-full rounded-md text-gray-300"
                                                       :placeholder="translations.tracks_tab_race_search"
                                                       @keyup.enter="$.post('https://rahe-racing/searchCompetitionTracks', JSON.stringify({text: value}))">

                                                <div x-show="competitionSeriesExpanded" class="grid grid-cols-1 gap-4 sm:grid-cols-2 mt-4">
                                                    <template x-for="competitionTrack in searchCompetitionTracks">
                                                        <div @click="$.post('https://rahe-racing/addCompetitionTrack', JSON.stringify({track: competitionTrack, class: selectedClass}))"
                                                             class="relative flex items-center space-x-3 rounded-lg bg-gray-800 hover:bg-gray-700 px-4 py-3 shadow-sm focus-within:ring-2 focus-within:ring-gray-500 focus-within:ring-offset-2 hover:border-gray-400">
                                                            <div class="flex-shrink-0">
                                                                <img class="h-10 w-10 rounded-full"
                                                                     :src="competitionTrack.profile_picture"
                                                                     @error="setDefaultPicture($event)"
                                                                     alt="">
                                                            </div>
                                                            <div class="min-w-0 flex-1">
                                                                <a href="#" class="focus:outline-none">
                                                                    <span class="absolute inset-0" aria-hidden="true"></span>
                                                                    <p class="text-sm font-medium text-white" x-text="competitionTrack.name"></p>
                                                                    <p class="truncate text-sm text-gray-500"
                                                                       x-text="competitionTrack.description"></p>
                                                                </a>
                                                            </div>
                                                        </div>
                                                    </template>
                                                </div>

                                                <div x-show="hiddenTrackAmount > 0" class="pb-5 text-xs text-gray-400 text-center mt-4">
                                                    <p>
                                                        <span x-text="translations.tracks_tab_race_results_hidden_pre"></span> <strong><span
                                                            x-text="hiddenTrackAmount"></span></strong> <span
                                                            x-text="translations.tracks_tab_race_results_hidden_aft"></span>
                                                    </p>
                                                    <p x-text="translations.tracks_tab_race_results_hidden_disclaimer">

                                                    </p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="w-full mb-6"
                                     :class="{'mt-8': selectedCompetitionType == 'COMPETITION', 'mt-72': selectedCompetitionType != 'COMPETITION'}">
                                    <button @click="$.post('https://rahe-racing/createRace', JSON.stringify({selectedTrackInfo: selectedTrackInfo,
                                        raceType: selectedCompetitionType, lapAmount: lapAmount, selectedClass: selectedClass, startTime: startTime,
                                        endTime: endTime, participationFee: participationFee, selectedCompetitionTracks: selectedCompetitionTracks,
                                        minutesFromNow: minutesFromNow }));"
                                            type="button"
                                            class="w-full text-center px-4 py-3 border border-transparent rounded-md shadow-sm text-lg font-medium text-white bg-gray-700 hover:bg-gray-600">
                                        <div>
                                            <span class="ml-3" x-text="translations.tracks_tab_race_create_button"></span>
                                        </div>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Races tab -->
        <div x-show="activeTab === 'races'" x-data="{
                races: [],
                competitions: [],
                showRaceSearch: false,
                allRaces: true,

                padNumber(number) {
                    return String(number).padStart(2, '0');
                },

                getTimeString(timestamp) {
                    let date = new Date(timestamp);
                    return this.padNumber(date.getHours()) + ':' + this.padNumber(date.getMinutes());
                }}"
             @message.window="
             if ($event.data.action == 'loadTabData' && $event.data.tab == 'races')  {
                races = $event.data.data.races;
                competitions = $event.data.data.competitions;
             }">
            <div class="pt-10 bg-gray-900 sm:pt-16 lg:pt-8 pt-4 lg:overflow-hidden">
                <div class="mx-auto max-w-8xl lg:px-8">
                    <div class="col-span-3 mx-auto px-4 sm:px-6 sm:text-center lg:px-0 lg:text-left lg:flex lg:items-center">
                        <div class="w-full">
                            <div class="pb-5 mt-8 sm:flex sm:items-center sm:justify-between">
                                <h2 class="flex text-left text-3xl tracking-tight font-extrabold text-white sm:text-3xl xl:text-3xl">
                                    <span class="block mr-3" x-text="translations.races_tab_header_competitions"></span>
                                </h2>
                            </div>

                            <div x-show="!competitions || competitions.length == 0">
                                <h2 class="text-light tracking-tight text-gray-400" x-text="translations.races_tab_competitions_none"></h2>
                            </div>

                            <div x-show="competitions && competitions.length > 0" class="">
                                <div class="flex flex-col">
                                    <div class="-my-2 -mx-4 overflow-x-auto sm:-mx-6 lg:-mx-8">
                                        <div class="inline-block min-w-full py-2 pb-8 align-middle md:px-6 lg:px-8">
                                            <div class="overflow-hidden shadow ring-1 ring-black ring-opacity-5 md:rounded-lg">
                                                <table class="min-w-full">
                                                    <thead class="bg-gray-800 text-center">
                                                    <tr>
                                                        <th scope="col" x-text="translations.races_tab_comp_table_information"
                                                            class="py-3.5 pl-4 pr-3 text-sm text-left font-medium text-white tracking-wider sm:pl-6">
                                                        </th>
                                                        <th scope="col" x-text="translations.races_tab_comp_table_start"
                                                            class="px-3 py-3.5 text-sm font-medium text-white tracking-wider">
                                                        </th>
                                                        <th scope="col" x-text="translations.races_tab_comp_table_prizepool"
                                                            class="px-3 py-3.5 text-sm font-medium text-white tracking-wider">
                                                        </th>
                                                        <th scope="col" x-text="translations.races_tab_comp_table_class"
                                                            class="px-3 py-3.5 text-sm font-medium text-white tracking-wider">
                                                        </th>
                                                        <th scope="col" x-text="translations.races_tab_comp_table_organizer"
                                                            class="px-3 py-3.5 text-sm font-medium text-white tracking-wider">
                                                        </th>
                                                        <th scope="col" class="px-3 py-3.5 text-sm font-medium text-white tracking-wider">
                                                        </th>
                                                    </tr>
                                                    </thead>
                                                    <tbody class="bg-gray-800 divide-y divide-gray-700">

                                                    <template x-for="competition in competitions">
                                                        <tr class="hover:bg-gray-700">
                                                            <td class="whitespace-nowrap py-2 pl-4 pr-3 text-sm sm:pl-6">
                                                                <div class="flex items-center">
                                                                    <div class="h-8 w-8 flex-shrink-0">
                                                                        <img class="h-8 w-8"
                                                                             src="img/track.png"
                                                                             alt="">
                                                                    </div>
                                                                    <div class="ml-4 cursor-pointer"
                                                                         @click="activeTab = 'trackInformation'; $.post('https://rahe-racing/loadTrackInfo', JSON.stringify({trackId: competition.track_id}));">
                                                                        <div class="flex items-center space-x-3">
                                                                            <h3 class="text-sm font-medium truncate text-gray-200"
                                                                                x-text="competition.name">
                                                                                Harmony Circuit</h3>
                                                                        </div>
                                                                        <div class="text-sm text-gray-300" x-text="competition.description">Kiire
                                                                            rada, mis
                                                                            algab ja lõppeb Harmonys.
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </td>
                                                            <td class="whitespace-nowrap px-3 py-2 text-sm text-gray-500 text-center">
                                                                <div class="text-gray-300 py-1 text-xs">
                                                                    <span class="bg-gray-700 rounded-full px-4 py-1"
                                                                          x-text="getTimeString(competition.start_time)"></span>
                                                                </div>
                                                            </td>
                                                            <td class="whitespace-nowrap px-3 py-2 text-sm text-gray-500 text-center">
                                                                <span class="rounded-full bg-green-200 px-4 py-1 text-xs font-semibold leading-5 text-gray-700"
                                                                      x-text="competition.prize_money.toLocaleString('en-US', {
                                                                          style: 'currency',
                                                                          currency: 'USD',
                                                                        });">
                                                                </span>
                                                            </td>
                                                            <td class="whitespace-nowrap px-12 py-2 text-sm text-gray-500 text-center">
                                                                <div class="text-gray-300 py-1 text-sm">
                                                                    <span x-text="competition.vehicle_class"></span>
                                                                </div>
                                                            </td>
                                                            <td class="whitespace-nowrap px-3 py-2 text-sm text-gray-500 text-center">
                                                                <div class="text-gray-300 py-1 text-sm">
                                                                    <span x-text="competition.alias"></span>
                                                                </div>
                                                            </td>

                                                            <td>
                                                                <button @click="$.post('https://rahe-racing/setTrackLocation', JSON.stringify({trackId: competition.track_id}))"
                                                                        type="button"
                                                                        class="text-center px-4 ml-3 py-1 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-gray-700 hover:bg-gray-500">
                                                                    <div>
                                                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 inline-block"
                                                                             fill="none" viewBox="0 0 24 24"
                                                                             stroke="currentColor" stroke-width="2">
                                                                            <path stroke-linecap="round" stroke-linejoin="round"
                                                                                  d="M3 21v-4m0 0V5a2 2 0 012-2h6.5l1 1H21l-3 6 3 6h-8.5l-1-1H5a2 2 0 00-2 2zm9-13.5V9"/>
                                                                        </svg>
                                                                    </div>
                                                                </button>
                                                            </td>
                                                        </tr>
                                                    </template>

                                                    <!-- More people... -->
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="pb-5 mt-8 sm:flex sm:items-center sm:justify-between">
                                <h2 class="flex text-left text-3xl tracking-tight font-extrabold text-white sm:text-3xl xl:text-3xl">
                                    <span x-text="allRaces ? translations.races_tab_header_races: translations.races_tab_header_my_races"
                                          class="block mr-3"></span>
                                    <button @click="allRaces = !allRaces; $.post('https://rahe-racing/racesTabSwitch', JSON.stringify({status: allRaces}))"
                                            type="button"
                                            class="block text-center px-4 py-1 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-gray-700">
                                        <div>
                                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24"
                                                 stroke="currentColor" stroke-width="2">
                                                <path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 10h16M4 14h16M4 18h16"/>
                                            </svg>
                                        </div>
                                    </button>
                                </h2>
                                <div class="mt-3 flex sm:mt-0 sm:ml-4">
                                    <h2 class="flex text-right text-3xl tracking-tight font-extrabold text-white sm:text-3xl xl:text-3xl">
                                        <span class="block mr-3"><span x-text="translations.tracks_tab_found_races"></span> <span
                                                x-text="races.length">0</span> <span
                                                x-text="translations.tracks_tab_found_races_amount"></span></span>
                                        <div x-transition:enter="transition duration-500 transform ease-out"
                                             x-transition:enter-start="scale-75"
                                             x-transition:leave="transition duration-100 transform ease-in"
                                             x-transition:leave-end="opacity-0 scale-90" class="text-center mr-3" x-show="showRaceSearch">
                                            <input id="raceTrackName" type="text" x-data="{ value: ''}" x-model="value"
                                                   class="shadow-sm p-2 py-1.5 pl-3 text-sm border focus:ring-indigo-500 focus:border-indigo-500 block w-full border-gray-300 rounded-md text-gray-400"
                                                   :placeholder="translations.tracks_tab_search_race"
                                                   @keyup.enter="$.post('https://rahe-racing/searchRace', JSON.stringify({text: value, allRaces: allRaces}))">
                                        </div>
                                        <button @click="showRaceSearch = !showRaceSearch"
                                                type="button"
                                                class="text-center px-4 py-1 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-gray-700">
                                            <div>
                                                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 inline-block" fill="none"
                                                     viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                                    <path stroke-linecap="round" stroke-linejoin="round"
                                                          d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
                                                </svg>
                                            </div>
                                        </button>
                                    </h2>
                                </div>
                            </div>

                            <div class="">
                                <div class="flex flex-col">
                                    <div class="-my-2 -mx-4 overflow-x-auto sm:-mx-6 lg:-mx-8">
                                        <div class="inline-block min-w-full py-2 pb-8 align-middle md:px-6 lg:px-8">
                                            <div class="overflow-hidden shadow ring-1 ring-black ring-opacity-5 md:rounded-lg">
                                                <table class="min-w-full">
                                                    <thead class="bg-gray-800 text-center">
                                                    <tr>
                                                        <th scope="col" x-text="translations.races_tab_race_table_information"
                                                            class="py-3.5 pl-4 pr-3 text-sm text-left font-medium text-white tracking-wider sm:pl-6">

                                                        </th>
                                                        <th scope="col" x-text="translations.races_tab_race_table_top"
                                                            class="px-3 py-3.5 text-sm font-medium text-white tracking-wider">
                                                        </th>
                                                        <th scope="col" x-text="translations.races_tab_race_table_organizer"
                                                            class="px-3 py-3.5 text-sm font-medium text-white tracking-wider">
                                                        </th>
                                                        <th scope="col" x-text="translations.races_tab_race_table_participation"
                                                            class="px-3 py-3.5 text-sm font-medium text-white tracking-wider">
                                                        </th>
                                                        <th scope="col"
                                                            class="relative py-3.5 pl-3 pr-4 sm:pr-6">
                                                        </th>
                                                    </tr>
                                                    </thead>
                                                    <tbody class="bg-gray-800 divide-y divide-gray-700">

                                                    <template x-for="race in races">
                                                        <tr class="hover:bg-gray-700">
                                                            <td class="whitespace-nowrap py-4 pl-4 pr-3 text-sm sm:pl-6">
                                                                <div class="flex items-center">
                                                                    <div class="h-10 w-10 flex-shrink-0">
                                                                        <img class="h-10 w-10"
                                                                             src="img/track.png"
                                                                             alt="">
                                                                    </div>
                                                                    <div class="ml-4 cursor-pointer"
                                                                         @click="activeTab = 'trackInformation'; $.post('https://rahe-racing/loadTrackInfo', JSON.stringify({trackId: race.track_id}));">
                                                                        <div class="flex items-center space-x-2">
                                                                            <h3 :class="{ 'text-red-300': race.isDeleted, 'text-white': !race.isDeleted}"
                                                                                class="text-sm font-medium truncate" x-text="race.name">
                                                                            </h3>

                                                                            <span x-show="race.is_competition">
                                                                                <svg class="rounded-full bg-gray-200 h-5 w-5 p-[3px] text-gray-700"
                                                                                     xmlns="http://www.w3.org/2000/svg" fill="none"
                                                                                     viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                                                                                    <path stroke-linecap="round" stroke-linejoin="round"
                                                                                          d="M16.5 18.75h-9m9 0a3 3 0 013 3h-15a3 3 0 013-3m9 0v-3.375c0-.621-.503-1.125-1.125-1.125h-.871M7.5 18.75v-3.375c0-.621.504-1.125 1.125-1.125h.872m5.007 0H9.497m5.007 0a7.454 7.454 0 01-.982-3.172M9.497 14.25a7.454 7.454 0 00.981-3.172M5.25 4.236c-.982.143-1.954.317-2.916.52A6.003 6.003 0 007.73 9.728M5.25 4.236V4.5c0 2.108.966 3.99 2.48 5.228M5.25 4.236V2.721C7.456 2.41 9.71 2.25 12 2.25c2.291 0 4.545.16 6.75.47v1.516M7.73 9.728a6.726 6.726 0 002.748 1.35m8.272-6.842V4.5c0 2.108-.966 3.99-2.48 5.228m2.48-5.492a46.32 46.32 0 012.916.52 6.003 6.003 0 01-5.395 4.972m0 0a6.726 6.726 0 01-2.749 1.35m0 0a6.772 6.772 0 01-3.044 0"/>
                                                                                </svg>
                                                                            </span>

                                                                            <span x-show="race.is_competition && race.prize_money != 0">
                                                                                <span x-text="'+' + race.prize_money.toLocaleString('en-US', {
                                                                                      style: 'currency',
                                                                                      currency: 'USD',
                                                                                    });"
                                                                                      class="rounded-full bg-green-200 px-3 py-0.5 text-xs font-semibold leading-5 text-gray-700">
                                                                                </span>
                                                                            </span>

                                                                            <span x-show="race.is_competition && race.rating_gain != '-'">
                                                                                <span>
                                                                                    <span x-show="race.rating_gain < 0"
                                                                                          x-text="race.rating_gain"
                                                                                          class="rounded-full bg-red-200 px-3 py-0.5 text-xs font-semibold leading-5 text-gray-700">
                                                                                    </span>

                                                                                    <span x-show="race.rating_gain == 0"
                                                                                          x-text="race.rating_gain"
                                                                                          class="rounded-full bg-yellow-200 px-3 py-0.5 text-xs font-semibold leading-5 text-gray-700">
                                                                                    </span>

                                                                                    <span x-show="race.rating_gain > 0"
                                                                                          x-text="'+' + race.rating_gain"
                                                                                          class="rounded-full bg-green-200 px-2 py-0.5 text-xs font-semibold leading-5 text-gray-700">
                                                                                    </span>
                                                                                </span>
                                                                            </span>
                                                                        </div>
                                                                        <div :class="{ 'text-red-300': race.isDeleted, 'text-gray-300': !race.isDeleted}"
                                                                             class="text-sm" x-text="race.description">Kiire rada, mis
                                                                            algab ja lõppeb Harmonys.
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </td>

                                                            <td class="whitespace-nowrap px-3 py-4 text-sm text-gray-500 text-center">
                                                                <div x-show="race.leaderBoard[0]"
                                                                     class="text-gray-300 bg-gray-700 hover:bg-gray-600 rounded-full py-1 text-xs cursor-pointer"
                                                                     @click="activeTab = 'raceInformation'; $.post('https://rahe-racing/loadRaceInfo', JSON.stringify({raceId: race.id}));">
                                                                    <span x-show="race.leaderBoard[0]" x-text="race.leaderBoard[0]"></span>
                                                                    <span x-show="race.leaderBoard[1]"> / <span
                                                                            x-text="race.leaderBoard[1]"></span></span>
                                                                    <span x-show="race.leaderBoard[2]"> / <span
                                                                            x-text="race.leaderBoard[2]"></span></span>
                                                                </div>
                                                                <div x-show="!race.leaderBoard[0]">
                                                                    -
                                                                </div>
                                                            </td>

                                                            <td class="whitespace-nowrap px-3 py-4 text-sm text-gray-500 text-center">
                                                                <div class="text-gray-300" x-text="race.started_by_alias">Edward</div>
                                                            </td>

                                                            <td class="whitespace-nowrap px-3 py-4 text-sm text-gray-500 text-center">
                                                                <div class="text-gray-300"><span x-text="race.players_started">17</span> <span
                                                                        x-text="translations.races_tab_race_table_drivers"></span>
                                                                    (<span x-text="race.finishPercentage">47</span>% <span
                                                                            x-text="translations.races_tab_race_table_finished"></span>)
                                                                </div>
                                                            </td>
                                                            <td class="whitespace-nowrap px-3 py-4 text-sm text-gray-500">
                                                                <span x-show="race.timeData.timeType == 1" x-text="race.timeData.timeString"
                                                                      class="inline-flex rounded-full bg-green-200 px-4 py-1 text-xs font-semibold leading-5 text-gray-700"></span>
                                                                <span x-show="race.timeData.timeType == 2" x-text="race.timeData.timeString"
                                                                      class="inline-flex rounded-full bg-yellow-200 px-4 py-1 text-xs font-semibold leading-5 text-gray-700"></span>
                                                                <span x-show="race.timeData.timeType == 3" x-text="race.timeData.timeString"
                                                                      class="inline-flex rounded-full bg-red-200 px-4 py-1 text-xs font-semibold leading-5 text-gray-700"></span>
                                                            </td>
                                                        </tr>
                                                    </template>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div x-show="activeTab === 'raceInformation'">
            <div class="pt-10 bg-gray-900 sm:pt-16 lg:pt-8 pt-4 lg:overflow-hidden">
                <div class="mx-auto max-w-8xl lg:px-8">
                    <div class="col-span-3 mx-auto px-4 sm:px-6 sm:text-center lg:px-0 lg:text-left lg:flex lg:items-center">
                        <div class="w-full" x-data="{raceInfo: '', leaderBoardEntries: []}"
                             @message.window="
                             if ($event.data.action == 'loadRaceInfo') {
                                raceInfo = $event.data.data.raceDetailsInfo;
                                leaderBoardEntries = $event.data.data.raceDetailsResults;
                             }">
                            <div class="pb-5 mt-8 px-8 sm:flex sm:items-center sm:justify-between">
                                <h2 class="flex text-left text-3xl tracking-tight font-extrabold text-white sm:text-3xl xl:text-3xl">
                                    <button @click="activeTab = 'races'; raceInfo = ''; leaderBoardEntries = [];"
                                            type="button"
                                            class="text-center px-4 py-1 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-gray-700">
                                        <div>
                                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 inline-block" fill="none"
                                                 viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                                <path stroke-linecap="round" stroke-linejoin="round" d="M10 19l-7-7m0 0l7-7m-7 7h18"/>
                                            </svg>
                                        </div>
                                    </button>

                                    <span class="block ml-3" x-text="translations.races_tab_race_details_header"></span>
                                </h2>

                                <div class="text-sm text-center">
                                    <div x-text="raceInfo.name" class="text-gray-200"></div>
                                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"
                                         class="w-4 h-4 inline-block text-gray-300">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z"/>
                                    </svg>

                                    <div x-text="raceInfo.finished_at" class="text-gray-300 text-xs inline-block align-middle"></div>
                                </div>
                            </div>

                            <div class="px-4 sm:px-6 lg:px-8 pb-12 mt-8">
                                <div class="flex flex-col">
                                    <div class="-my-2 -mx-4 overflow-x-auto sm:-mx-6 lg:-mx-8">
                                        <div class="inline-block min-w-full py-2 align-middle md:px-6 lg:px-16">
                                            <div class="overflow-hidden shadow ring-1 ring-black ring-opacity-5 md:rounded-lg">
                                                <table class="min-w-full">
                                                    <thead class="bg-gray-800">
                                                    <tr>
                                                        <th></th>
                                                        <th scope="col"
                                                            class="py-3.5 text-left text-sm tracking-wider font-medium text-white uppercase"
                                                            x-text="translations.races_tab_race_details_table_driver">
                                                        </th>
                                                        <th scope="col"
                                                            class="px-3 py-3.5 text-center text-sm tracking-wider font-medium text-white uppercase"
                                                            x-text="translations.races_tab_race_details_table_time">
                                                        </th>
                                                        <th scope="col"
                                                            class="px-3 py-3.5 text-center text-sm tracking-wider font-medium text-white uppercase"
                                                            x-text="translations.races_tab_race_details_table_vehicle">
                                                        </th>
                                                        <th scope="col"
                                                            class="px-3 py-3.5 text-center text-sm tracking-wider font-medium text-white uppercase"
                                                            x-text="translations.races_tab_race_details_table_rating">
                                                        </th>
                                                        <th scope="col"
                                                            class="px-3 py-3.5 text-center text-sm tracking-wider font-medium text-white uppercase"
                                                            x-text="translations.races_tab_race_details_table_money">
                                                        </th>
                                                    </tr>
                                                    </thead>
                                                    <tbody class="bg-gray-800">
                                                    <template x-for="entry in leaderBoardEntries">
                                                        <tr class="hover:bg-gray-700 duration-300">
                                                            <td x-text="entry.position"
                                                                class="whitespace-nowrap py-4 text-sm text-gray-200 sm:pl-6 font-semibold">
                                                            </td>
                                                            <td class="whitespace-nowrap py-4 pr-3 text-sm">
                                                                <div class="flex items-center">
                                                                    <div class="h-10 w-10 flex-shrink-0">
                                                                        <img class="h-10 w-10 rounded-full"
                                                                             :src="entry.profile_picture"
                                                                             @error="setDefaultPicture($event)"
                                                                             alt="">
                                                                    </div>
                                                                    <div class="ml-4">
                                                                        <div x-text="entry.alias" class="font-medium text-gray-200"></div>
                                                                        <div x-text="entry.ratingLevelLabel" class="text-gray-300 text-xs"></div>
                                                                    </div>
                                                                </div>
                                                            </td>
                                                            <td class="whitespace-nowrap px-3 py-4 text-sm text-center">
                                                                <div x-text="entry.total_time_string" class="text-gray-200"></div>
                                                                <div x-show="entry.differenceWithFirst && entry.total_time_string !== 'DNF'"
                                                                     x-text="'+' + entry.differenceWithFirst" class="text-gray-300 text-xs"></div>
                                                            </td>
                                                            <td class="whitespace-nowrap px-3 py-4 text-sm text-center">
                                                                <div x-text="entry.vehicle_model_name" class="text-gray-200"></div>
                                                                <div x-show="entry.vehicle_model_name !== 'DNF'"
                                                                     x-text="entry.vehicle_class + ' ' + translations.races_tab_race_details_table_class"
                                                                     class="text-gray-300 text-xs"></div>
                                                            </td>
                                                            <td class="whitespace-nowrap px-3 py-4 text-sm text-center">
                                                                <span x-text="entry.rating_gain"
                                                                      class="inline-flex rounded-full px-2 text-xs font-semibold leading-5 text-gray-700"
                                                                      :class="{'bg-green-200': entry.rating_gain >= 0, 'bg-red-200': entry.rating_gain < 0}"></span>
                                                            </td>
                                                            <td class="whitespace-nowrap px-3 py-4 text-sm text-center">
                                                                <span x-text="entry.prize_money.toLocaleString('en-US', {
                                                                          style: 'currency',
                                                                          currency: 'USD',
                                                                        });"
                                                                      class="inline-flex rounded-full px-2 text-xs font-semibold leading-5 text-gray-700 bg-green-200">
                                                                </span>
                                                            </td>
                                                        </tr>
                                                    </template>
                                                    <!-- More people... -->
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Leaderboard tab -->
        <div x-show="activeTab === 'leaderboard'" x-data="{ leaderboardEntries: [] }"
             @message.window="
             if ($event.data.action == 'loadTabData' && $event.data.tab == 'leaderboard')  {
                leaderboardEntries = $event.data.data.leaderboardEntries;
             }">
            <div class="pt-10 bg-gray-900 sm:pt-16 lg:pt-8 pt-4 lg:overflow-hidden">
                <div class="mx-auto max-w-8xl lg:px-8">
                    <div class="col-span-3 mx-auto px-4 sm:px-6 sm:text-center lg:px-0 lg:text-left lg:flex lg:items-center">
                        <div class="w-full">
                            <div class="pb-5 mt-8 sm:flex sm:items-center sm:justify-between">
                                <h2 class="flex text-left text-3xl tracking-tight font-extrabold text-white sm:text-3xl xl:text-3xl">
                                    <span x-text="translations.leader_tab_header_leaderboard"></span>
                                </h2>

                                <span class="inline-flex items-center px-12 py-1.5 text-md font-bold leading-4 rounded-lg text-white uppercase tracking-wide bg-gray-700">
                                    <span x-text="rating + translations.leader_tab_header_rating"></span>
                                </span>
                            </div>

                            <div class="">
                                <div class="flex flex-col">
                                    <div class="-my-2 -mx-4 overflow-x-auto sm:-mx-6 lg:-mx-8">
                                        <div class="inline-block min-w-full py-2 align-middle md:px-6 lg:px-8">
                                            <div class="overflow-hidden shadow ring-1 ring-black ring-opacity-5 md:rounded-lg">
                                                <table class="min-w-full mb-6">
                                                    <thead class="bg-gray-800 text-center">
                                                    <tr>
                                                        <th
                                                                scope="col"
                                                                class="py-3.5 pl-4 pr-3 text-sm text-left font-semibold text-white sm:pl-6">
                                                        </th>

                                                        <th x-text="translations.leader_tab_table_driver"
                                                            scope="col" class="pr-3 py-3.5 text-sm text-left font-medium text-white tracking-wider">
                                                        </th>

                                                        <th x-text="translations.leader_tab_table_rating"
                                                            scope="col" class="px-3 py-3.5 text-sm font-medium text-white tracking-wider">
                                                        </th>

                                                        <th x-text="translations.leader_tab_normal_races"
                                                            scope="col" class="px-3 py-3.5 text-sm font-medium text-white tracking-wider">
                                                        </th>

                                                        <th x-text="translations.leader_tab_comp_races"
                                                            scope="col" class="px-3 py-3.5 text-sm font-medium text-white tracking-wider">
                                                        </th>

                                                        <th x-text="translations.leader_tab_avg_pos"
                                                            scope="col" class="px-3 py-3.5 text-sm font-medium text-white tracking-wider">
                                                        </th>
                                                    </tr>
                                                    </thead>
                                                    <tbody class="bg-gray-800">

                                                    <template x-for="(entry, index) in leaderboardEntries">
                                                        <tr>
                                                            <td class="whitespace-nowrap py-3 pl-4 pr-3 text-sm text-center font-bold">
                                                                <div class="text-gray-300" x-text="index + 1">
                                                                </div>
                                                            </td>
                                                            <td class="whitespace-nowrap py-3 pr-3 text-sm">
                                                                <div class="flex items-center">
                                                                    <div class="h-10 w-10 flex-shrink-0">
                                                                        <img class="h-10 w-10 rounded-full"
                                                                             :src="entry.profile_picture"
                                                                             @error="setDefaultPicture($event)"
                                                                             alt="">
                                                                    </div>
                                                                    <div class="ml-4">
                                                                        <div class="flex items-center space-x-3">
                                                                            <h3 class="text-white text-sm font-medium truncate" x-text="entry.alias">
                                                                                Edward</h3>
                                                                        </div>
                                                                        <div class="text-gray-300 text-sm" x-text="entry.ratingLevelLabel"></div>
                                                                    </div>
                                                                </div>
                                                            </td>
                                                            <td class="whitespace-nowrap px-3 py-3 text-sm text-gray-500 text-center">
                                                                <div class="text-gray-300" x-text="entry.rating"> 1722
                                                                </div>
                                                            </td>
                                                            <td class="whitespace-nowrap px-3 py-3 text-sm text-gray-500 text-center">
                                                                <div class="text-gray-300" x-text="entry.normalRaces">143</div>
                                                            </td>
                                                            <td class="whitespace-nowrap px-3 py-3 text-sm text-gray-500 text-center">
                                                                <div class="text-gray-300" x-text="entry.competitionRaces">47</div>
                                                            </td>
                                                            <td class="whitespace-nowrap px-2 py-3 text-sm text-gray-500 text-center">
                                                                <span :class="{'bg-green-200': entry.avgPosition <= 4, 'bg-yellow-200': entry.avgPosition > 4 && entry.avgPosition <= 8, 'bg-red-200': entry.avgPosition > 8}"
                                                                      class="inline-flex rounded-full px-6 py-1 text-sm font-semibold leading-5 text-gray-700"
                                                                      x-text="entry.avgPosition">1.3</span>
                                                            </td>
                                                        </tr>
                                                    </template>

                                                    <!-- More people... -->
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Profile tab -->
        <div x-show="activeTab === 'profile'" x-data="{name: '', picture: '', date: ''}"
             @message.window="
             if ($event.data.action == 'loadTabData' && $event.data.tab == 'profile')  {
                name = $event.data.data.name;
                picture = $event.data.data.picture;
                date = $event.data.data.date;
             }">
            <div class="pt-10 bg-gray-900 sm:pt-16 lg:pt-8 pt-4 lg:overflow-hidden">
                <div class="mx-auto max-w-8xl lg:px-8">
                    <div class="col-span-3 mx-auto px-4 sm:px-6 sm:text-center lg:px-0 lg:text-left lg:flex lg:items-center">
                        <div class="w-full">
                            <div class="bg-gray-800 shadow rounded-lg">
                                <div class="px-4 py-4 sm:px-6 lg:max-w-6xl lg:mx-auto lg:px-8">
                                    <div class="md:flex md:items-center md:justify-between">
                                        <div class="flex-1 min-w-0">
                                            <!-- Profile -->
                                            <div class="flex items-center">
                                                <img class="hidden h-16 w-16 rounded-full sm:block" :src="picture" alt="">
                                                <div>
                                                    <div class="flex items-center">
                                                        <h1 class="ml-3 text-2xl font-bold leading-7 text-white sm:leading-9 sm:truncate"><span
                                                                x-text="translations.profile_tab_header_driver"></span> <span
                                                                x-text="name"></span></h1>
                                                    </div>
                                                    <dl class="mt-6 flex flex-col sm:ml-3 sm:mt-1 sm:flex-row sm:flex-wrap">
                                                        <dd class="mt-3 flex items-center text-sm text-gray-300 font-normal sm:mr-6 sm:mt-0">
                                                            <!-- Heroicon name: solid/check-circle -->
                                                            <svg xmlns="http://www.w3.org/2000/svg" class="flex-shrink-0 mr-1.5 h-5 w-5" fill="none"
                                                                 viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                                                <path stroke-linecap="round" stroke-linejoin="round"
                                                                      d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/>
                                                            </svg>
                                                            <span x-text="translations.profile_tab_member_since"></span> <span class="ml-1"
                                                                                                                               x-text="date"></span>
                                                        </dd>
                                                    </dl>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="flex space-x-3" x-data="{activeElement: '', requestKey: ''}" @message.window="if ($event.data.action == 'loadRequestKey') { requestKey = $event.data.key }">
                                            <!-- Text input for name change -->
                                            <div x-show="activeElement == 'name'" class="inline-flex text-center">
                                                <input type="text" x-model="name"
                                                       class=" py-2 pl-3 text-sm border focus:ring-indigo-500 focus:border-indigo-500 block w-full border-gray-300 rounded-md text-gray-400"
                                                       :placeholder="translations.profile_tab_new_name_placeholder">
                                                <button @click="$.post('https://rahe-racing/changeName', JSON.stringify({name: name}))"
                                                        type="button"
                                                        class="items-center ml-1 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-gray-700 hover:bg-gray-600">
                                                    <span x-text="translations.profile_tab_save || 'Save'"></span>
                                                </button>
                                            </div>

                                            <!-- Text input for picture change -->
                                            <div x-show="activeElement == 'picture'" class="inline-flex text-center">
                                                <input type="text" x-model="picture"
                                                       class=" py-2 pl-3 text-sm border focus:ring-indigo-500 focus:border-indigo-500 block w-full border-gray-300 rounded-md text-gray-400"
                                                       :placeholder="translations.profile_tab_new_picture_placeholder">
                                                <button @click="$.post('https://rahe-racing/changePicture', JSON.stringify({picture: picture}))"
                                                        type="button"
                                                        class="items-center ml-1 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-gray-700 hover:bg-gray-600">
                                                    <span x-text="translations.profile_tab_save || 'Save'"></span>
                                                </button>

                                                <button x-show="recommendedUploadWebsite" @click="window.invokeNative('openUrl', recommendedUploadWebsite + requestKey)" type="button"
                                                        class="inline-flex items-center justify-center rounded-md bg-gray-700 text-white text-gray-300 hover:bg-gray-600 px-4 ml-1 shadow-sm text-sm font-semibold shadow-sm sm:w-auto h-full">
                                                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4 mr-1.5">
                                                        <path stroke-linecap="round" stroke-linejoin="round" d="M13.5 6H5.25A2.25 2.25 0 0 0 3 8.25v10.5A2.25 2.25 0 0 0 5.25 21h10.5A2.25 2.25 0 0 0 18 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25" />
                                                    </svg>
                                                    <span style="white-space: nowrap;" x-text="translations.profile_tab_upload || 'Upload'"></span>
                                                </button>
                                            </div>

                                            <!-- Enter name change button -->
                                            <button x-show="activeElement == ''" @click="activeElement = 'name'"
                                                    type="button" x-text="translations.profile_tab_button_name"
                                                    class="inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-gray-700 hover:bg-gray-600">
                                            </button>

                                            <!-- Enter picture change button -->
                                            <button x-show="activeElement == ''" @click="activeElement = 'picture'; $.post('https://rahe-racing/getRequestInfo', JSON.stringify({}))"
                                                    type="button" x-text="translations.profile_tab_picture_name"
                                                    class="inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-gray-700 hover:bg-gray-600">
                                            </button>

                                            <!-- Exit name/picture change button-->
                                            <button x-show="activeElement != ''"
                                                    @click="activeElement = ''"
                                                    type="button"
                                                    class="inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-gray-700 hover:bg-gray-600">
                                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-5 h-5">
                                                    <path fill-rule="evenodd" d="M5.47 5.47a.75.75 0 0 1 1.06 0L12 10.94l5.47-5.47a.75.75 0 1 1 1.06 1.06L13.06 12l5.47 5.47a.75.75 0 1 1-1.06 1.06L12 13.06l-5.47 5.47a.75.75 0 0 1-1.06-1.06L10.94 12 5.47 6.53a.75.75 0 0 1 0-1.06Z" clip-rule="evenodd" />
                                                </svg>
                                            </button>

                                            <!-- Get vehicle class button -->
                                            <button x-show="activeElement == ''"
                                                    @click="$.post('https://rahe-racing/getVehicleClass', JSON.stringify({}))"
                                                    type="button"
                                                    class="inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-gray-700 hover:bg-gray-600">
                                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                                                     stroke="currentColor" class="w-5 h-5">
                                                    <path stroke-linecap="round" stroke-linejoin="round"
                                                          d="M8.25 18.75a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m3 0h6m-9 0H3.375a1.125 1.125 0 01-1.125-1.125V14.25m17.25 4.5a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m3 0h1.125c.621 0 1.129-.504 1.09-1.124a17.902 17.902 0 00-3.213-9.193 2.056 2.056 0 00-1.58-.86H14.25M16.5 18.75h-2.25m0-11.177v-.958c0-.568-.422-1.048-.987-1.106a48.554 48.554 0 00-10.026 0 1.106 1.106 0 00-.987 1.106v7.635m12-6.677v6.677m0 4.5v-4.5m0 0h-12"/>
                                                </svg>
                                            </button>
                                        </div>
                                    </div>

                                    <div class="relative py-4">
                                        <div class="absolute inset-0 flex items-center" aria-hidden="true">
                                            <div class="w-full border-t border-gray-700"></div>
                                        </div>
                                    </div>

                                    <div x-data="{
                                            changeColor(color, type) {
                                                $.post('https://rahe-racing/changeColor', JSON.stringify({color: color, type: type}))
                                            }}" class="grid grid-cols-2 gap-x-16">
                                        <div>
                                            <h2 class="text-lg font-bold leading-7 sm:leading-9 sm:truncate text-gray-100"
                                                x-text="translations.profile_tab_checkpoint_color"></h2>
                                            <ul role="list" class="grid grid-cols-6 gap-x-2">
                                                <li @click="changeColor('white', 'checkpoint')"
                                                    class="relative cursor-pointer">
                                                    <div class="bg-white hover:bg-gray-200 rounded-md shadow-sm">
                                                        &nbsp;
                                                    </div>
                                                </li>

                                                <li @click="changeColor('red', 'checkpoint')"
                                                    class="relative cursor-pointer">
                                                    <div class="bg-red-500 hover:bg-red-600 rounded-md shadow-sm">
                                                        &nbsp;
                                                    </div>
                                                </li>

                                                <li @click="changeColor('green', 'checkpoint')"
                                                    class="relative cursor-pointer">
                                                    <div class="bg-green-500 hover:bg-green-600 rounded-md shadow-sm">
                                                        &nbsp;
                                                    </div>
                                                </li>

                                                <li @click="changeColor('blue', 'checkpoint')"
                                                    class="relative cursor-pointer">
                                                    <div class="bg-blue-500 hover:bg-blue-600 rounded-md shadow-sm">
                                                        &nbsp;
                                                    </div>
                                                </li>

                                                <li @click="changeColor('purple', 'checkpoint')"
                                                    class="relative cursor-pointer">
                                                    <div class="bg-purple-500 hover:bg-purple-600 rounded-md shadow-sm">
                                                        &nbsp;
                                                    </div>
                                                </li>

                                                <li @click="changeColor('yellow', 'checkpoint')"
                                                    class="relative cursor-pointer">
                                                    <div class="bg-yellow-500 hover:bg-yellow-600 rounded-md shadow-sm">
                                                        &nbsp;
                                                    </div>
                                                </li>
                                            </ul>
                                        </div>

                                        <div>
                                            <h2 class="text-lg font-bold leading-7 sm:leading-9 sm:truncate text-gray-100"
                                                x-text="translations.profile_tab_gps_color"></h2>
                                            <ul role="list" class="grid grid-cols-6 gap-x-2">
                                                <li @click="changeColor('white', 'gps')"
                                                    class="relative cursor-pointer">
                                                    <div class="bg-white hover:bg-gray-100 rounded-md shadow-sm">
                                                        &nbsp;
                                                    </div>
                                                </li>

                                                <li @click="changeColor('red', 'gps')"
                                                    class="relative cursor-pointer">
                                                    <div class="bg-red-500 hover:bg-red-600 rounded-md shadow-sm">
                                                        &nbsp;
                                                    </div>
                                                </li>

                                                <li @click="changeColor('green', 'gps')"
                                                    class="relative cursor-pointer">
                                                    <div class="bg-green-500 hover:bg-green-600 rounded-md shadow-sm">
                                                        &nbsp;
                                                    </div>
                                                </li>

                                                <li @click="changeColor('blue', 'gps')"
                                                    class="relative cursor-pointer">
                                                    <div class="bg-blue-500 hover:bg-blue-600 rounded-md shadow-sm">
                                                        &nbsp;
                                                    </div>
                                                </li>

                                                <li @click="changeColor('purple', 'gps')"
                                                    class="relative cursor-pointer">
                                                    <div class="bg-purple-500 hover:bg-purple-600 rounded-md shadow-sm">
                                                        &nbsp;
                                                    </div>
                                                </li>

                                                <li @click="changeColor('yellow', 'gps')"
                                                    class="relative cursor-pointer">
                                                    <div class="bg-yellow-500 hover:bg-yellow-600 rounded-md shadow-sm">
                                                        &nbsp;
                                                    </div>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="bg-gray-900">
                                <div class="max-w-7xl mx-auto py-16 px-4 sm:py-12 sm:px-6 lg:px-8 sm:pt-24">
                                    <div class="lg:max-w-xl lg:mx-auto lg:text-center">
                                        <h2 class="text-3xl font-extrabold tracking-tight text-white sm:text-4xl"
                                            x-text="translations.profile_tab_faq_title"></h2>
                                        <p class="mt-4 text-gray-400" x-text="translations.profile_tab_faq_desc"></p>
                                    </div>
                                    <div class="mt-20">
                                        <dl class="space-y-10 lg:space-y-0 lg:grid lg:grid-cols-2 lg:gap-x-12 lg:gap-y-8">
                                            <div>
                                                <dt class="font-semibold text-white" x-text="translations.profile_tab_faq_1_q"></dt>
                                                <dd class="mt-3 text-gray-400" x-text="translations.profile_tab_faq_1_a"></dd>
                                            </div>

                                            <div>
                                                <dt class="font-semibold text-white" x-text="translations.profile_tab_faq_2_q"></dt>
                                                <dd class="mt-3 text-gray-400" x-text="translations.profile_tab_faq_2_a"></dd>
                                            </div>

                                            <div>
                                                <dt class="font-semibold text-white" x-text="translations.profile_tab_faq_3_q"></dt>
                                                <dd class="mt-3 text-gray-400" x-text="translations.profile_tab_faq_3_a"></dd>
                                            </div>

                                            <div>
                                                <dt class="font-semibold text-white" x-text="translations.profile_tab_faq_4_q"></dt>
                                                <dd class="mt-3 text-gray-400" x-text="translations.profile_tab_faq_4_a"></dd>
                                            </div>

                                            <div>
                                                <dt class="font-semibold text-white" x-text="translations.profile_tab_faq_5_q"></dt>
                                                <dd class="mt-3 text-gray-400" x-text="translations.profile_tab_faq_5_a"></dd>
                                            </div>

                                            <div>
                                                <dt class="font-semibold text-white" x-text="translations.profile_tab_faq_6_q"></dt>
                                                <dd class="mt-3 text-gray-400" x-text="translations.profile_tab_faq_6_a"></dd>
                                            </div>

                                            <div>
                                                <dt class="font-semibold text-white" x-text="translations.profile_tab_faq_7_q"></dt>
                                                <dd class="mt-3 text-gray-400" x-text="translations.profile_tab_faq_7_a"></dd>
                                            </div>

                                            <div>
                                                <dt class="font-semibold text-white" x-text="translations.profile_tab_faq_8_q"></dt>
                                                <dd class="mt-3 text-gray-400" x-text="translations.profile_tab_faq_8_a"></dd>
                                            </div>

                                            <!-- More questions... -->
                                        </dl>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Tablet modal overlay -->
<div x-data="{activeModal: ''}" x-show="activeModal !== ''" class="z-10" aria-labelledby="modal-title" role="dialog" aria-modal="true"
     style="position: absolute; margin: 0 auto; left:2vh; right: 2vh; top: 8.4vh; width:63.4vw; height:67.2vh;"
     @message.window="
     if ($event.data.action == 'hideMenu')  {
        activeModal = '';
     }">
    <div x-show="activeModal !== ''"
         x-transition:enter="ease-out duration-300"
         x-transition:enter-start="opacity-0"
         x-transition:enter-end="opacity-100"
         x-transition:leave="ease-in duration-200"
         x-transition:leave-start="opacity-100"
         x-transition:leave-end="opacity-0"
         class="absolute h-full w-full inset-0 bg-gray-500 bg-opacity-75 transition-opacity"></div>

    <div class="absolute h-full w-full inset-0 z-10 overflow-y-auto">
        <div class="flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0">
            <div x-data="{trackId: 0, laps: 0, index: 0}"
                 x-show="activeModal === 'trackConfiguration'"
                 x-transition:enter="ease-out duration-300"
                 x-transition:enter-start="opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"
                 x-transition:enter-end="opacity-100 translate-y-0 sm:scale-100"
                 x-transition:leave="ease-in duration-200"
                 x-transition:leave-start="opacity-100 translate-y-0 sm:scale-100"
                 x-transition:leave-end="opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"
                 class="relative transform overflow-hidden rounded-lg bg-gray-800 px-4 pt-5 pb-4 text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-sm sm:p-6">
                <div @track-configuration-opened.window="activeModal = 'trackConfiguration'; laps = $event.detail.laps || 2; index = $event.detail.index;">
                    <div class="text-center">
                        <h3 x-text="translations.tracks_tab_details_configuration_modal_title" class="text-base font-semibold leading-6 text-gray-100"></h3>
                        <div class="mt-2">
                            <p x-text="translations.tracks_tab_details_configuration_modal_description" class="text-sm text-gray-300"></p>
                        </div>
                    </div>

                    <div class="mt-8 grid grid-cols-1">
                        <div>
                            <label x-text="translations.tracks_tab_details_configuration_modal_laps" for="lapAmount" class="ml-px block pl-4 text-sm font-medium leading-6 text-gray-300"></label>
                            <div class="mt-2">
                                <input x-model="laps" type="text" name="lapAmount" id="lapAmount" class="block w-full rounded-full border-0 px-4 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-gray-600 sm:text-sm sm:leading-6" placeholder="">
                            </div>
                        </div>
                    </div>
                </div>

                <div class="mt-5 sm:mt-6 sm:grid sm:grid-flow-row-dense sm:grid-cols-2 sm:gap-3">
                    <button @click="activeModal = ''; $dispatch('track-laps-updated', {index: index, laps: laps});"
                            x-text="translations.tracks_tab_details_configuration_modal_confirm"
                            type="button"
                            class="inline-flex w-full justify-center rounded-md bg-gray-500 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-gray-400 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-gray-400 sm:col-start-2">
                    </button>
                    <button @click="activeModal = '';"
                            x-text="translations.tracks_tab_details_configuration_modal_cancel"
                            type="button"
                            class="mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:col-start-1 sm:mt-0">
                    </button>
                </div>
            </div>

            <div x-data="{trackId: 0}"
                 x-show="activeModal === 'trackDeletion'"
                 x-transition:enter="ease-out duration-300"
                 x-transition:enter-start="opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"
                 x-transition:enter-end="opacity-100 translate-y-0 sm:scale-100"
                 x-transition:leave="ease-in duration-200"
                 x-transition:leave-start="opacity-100 translate-y-0 sm:scale-100"
                 x-transition:leave-end="opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"
                 class="relative transform overflow-hidden rounded-lg bg-gray-800 px-4 pt-5 pb-4 text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-sm sm:p-6">
                <div @track-deletion-opened.window="activeModal = 'trackDeletion'; trackId = $event.detail.id">
                    <div class="text-center">
                        <h3 x-text="translations.tracks_tab_details_deletion_modal_title" class="text-base font-semibold leading-6 text-gray-100"
                            id="profile-modal-title"></h3>
                        <div class="mt-2">
                            <p x-text="translations.tracks_tab_details_deletion_modal_description" class="text-sm text-gray-300">Are you sure you wish
                                to delete the track?</p>
                        </div>
                    </div>
                </div>

                <div class="mt-5 sm:mt-6 sm:grid sm:grid-flow-row-dense sm:grid-cols-2 sm:gap-3">
                    <button @click="$.post('https://rahe-racing/deleteTrack', JSON.stringify({trackId: trackId})); activeModal = ''; activeTab = 'tracks'"
                            x-text="translations.tracks_tab_details_deletion_modal_confirm"
                            type="button"
                            class="inline-flex w-full justify-center rounded-md bg-red-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-red-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-red-500 sm:col-start-2">
                    </button>
                    <button @click="activeModal = ''"
                            x-text="translations.tracks_tab_details_deletion_modal_cancel"
                            type="button"
                            class="mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:col-start-1 sm:mt-0">
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Tablet background frame -->
<img x-data="{backgroundUrl: 'img/background-frame.png'}"
     @message.window="
     if ($event.data.action == 'useThinBackgroundFrame') {
        backgroundUrl = 'img/background-frame-2.png'
     }"
     x-show="showMenu"
     x-transition
     :src="backgroundUrl" alt="tablet" class="tablet-frame"
     style="pointer-events: none; position: absolute; margin: 0 auto; left:0; right: 0; top: 2.5vh; width:70vw;height:79vh;"/>

<!-- Track recording -->
<div id="recordingDiv" x-show="showTrackCreationHelper">
    <div class="flex flex-col">
        <div class="-my-2 overflow-x-auto sm:-mx-6 lg:-mx-8">
            <div class="py-2 align-middle inline-block min-w-full sm:px-6 lg:px-8">
                <div class="shadow overflow-hidden">
                    <div class="px-4 py-2 whitespace-nowrap text-sm font-medium text-gray-100">
                        <div class="grid grid-cols-2 leading-tight">
                            <div x-text="translations.track_creation_title"></div>
                            <div class="text-right font-light">
                                <div><i class="fa fa-circle text-red-500 Blink"></i></div>
                            </div>
                        </div>
                        <div class="mt-5">
                            <div class="flex flex-row">
                                <div class="flex-none" x-text="translations.track_creation_point_placement">
                                    Punkti paigutamine
                                </div>
                                <div class="flex-auto text-right">
                                    <span class="inline-flex items-center px-2 rounded-md text-xs font-medium bg-gray-100 text-gray-800">E</span>
                                </div>
                            </div>
                            <div class="flex flex-row mt-0.5">
                                <div class="flex-none" x-text="translations.track_creation_object_placement">
                                    Objekti paigutamine
                                </div>
                                <div class="flex-auto text-right">
                                    <span class="inline-flex items-center px-2 rounded-md text-xs font-medium bg-gray-100 text-gray-800">Shift + E</span>
                                </div>
                            </div>
                            <div class="flex flex-row mt-0.5">
                                <div class="flex-none" x-text="translations.track_creation_object_distance">
                                    Objekti kaugus
                                </div>
                                <div class="flex-auto text-right">
                                    <span class="inline-flex items-center px-2 rounded-md text-xs font-bold bg-gray-100 text-gray-800">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-3.5 w-3.5" fill="none" viewBox="0 0 24 24"
                                             stroke="currentColor" stroke-width="2">
                                            <path stroke-linecap="round" stroke-linejoin="round" d="M8 7l4-4m0 0l4 4m-4-4v18"/>

                                        </svg>
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-3.5 w-3.5" fill="none" viewBox="0 0 24 24"
                                             stroke="currentColor" stroke-width="2">
                                          <path stroke-linecap="round" stroke-linejoin="round" d="M19 14l-7 7m0 0l-7-7m7 7V3"/>
                                        </svg>
                                    </span>
                                </div>
                            </div>
                            <div class="flex flex-row mt-0.5">
                                <div class="flex-none" x-text="translations.track_creation_object_rotation">
                                    Objekti pööramine
                                </div>
                                <div class="flex-auto text-right">
                                    <span class="inline-flex items-center px-2 rounded-md text-xs font-bold bg-gray-100 text-gray-800">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-3.5 w-3.5" fill="none" viewBox="0 0 24 24"
                                             stroke="currentColor" stroke-width="2">
                                          <path stroke-linecap="round" stroke-linejoin="round" d="M10 19l-7-7m0 0l7-7m-7 7h18"/>
                                        </svg>
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-3.5 w-3.5" fill="none" viewBox="0 0 24 24"
                                             stroke="currentColor" stroke-width="2">
                                          <path stroke-linecap="round" stroke-linejoin="round" d="M14 5l7 7m0 0l-7 7m7-7H3"/>
                                        </svg>
                                    </span>
                                </div>
                            </div>
                            <div class="flex flex-row mt-0.5">
                                <div class="flex-none" x-text="translations.track_creation_object_change">
                                    Objekti muutmine
                                </div>
                                <div class="flex-auto text-right">
                                    <span class="inline-flex items-center px-2 rounded-md text-xs font-medium bg-gray-100 text-gray-800">L ALT</span>
                                </div>
                            </div>
                            <div class="flex flex-row mt-0.5">
                                <div class="flex-none" x-text="translations.track_creation_object_deletion">
                                    Kustutamine
                                </div>
                                <div class="flex-auto text-right">
                                    <span class="inline-flex items-center px-2 rounded-md text-xs font-medium bg-gray-100 text-gray-800">L CTRL</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Race live information -->
<div x-data="{showLeaderboard: false, trackType: 'SPRINT', totalTime: '00:00.00', currentTime: '00:00.00', bestTime: '--:--:--', checkpoints: '0', laps: '0', position: '0', participants: '0', lbFirst: '', lbSecond: '', lbThird: ''}"
     id="scoreboard" x-show="showLeaderboard"
     @message.window="
        if ($event.data.action == 'showLeaderboard') {
            showLeaderboard = true;
            trackType = $event.data.trackType;
        }
        else if ($event.data.action == 'hideLeaderboard') {
            setTimeout(function()
            {
                showLeaderboard = false;
            }, 5000);
        }
        else if ($event.data.action == 'updateHudGeneral') {
            checkpoints = $event.data.checkpoints;
            laps = $event.data.laps;
        }
        else if ($event.data.action == 'updateHudTime') {
            totalTime = $event.data.totalTime;
            currentTime = $event.data.currentTime;
        }
        else if ($event.data.action == 'updateHudBestLap') {
            bestTime = $event.data.time;
        }
        else if ($event.data.action == 'updateLeaderboard') {
            if ($event.data.first != '') {
                lbFirst = event.data.first.racing_alias;
            }
            else if ($event.data.leaderboard.length >= 1) {
                lbFirst = $event.data.leaderboard[0].alias;
            }

            if($event.data.second != '') {
                lbSecond = $event.data.second.racing_alias;
            }
            else if ($event.data.leaderboard.length  >= 2) {
                lbSecond = $event.data.leaderboard[1].alias;
            }

            if($event.data.third != '') {
                lbThird = $event.data.third.racing_alias;
            }
            else if ($event.data.leaderboard.length >= 3) {
                lbThird = $event.data.leaderboard[2].alias;
            }

            position = $event.data.playerPosition;
            participants = $event.data.totalParticipants;
        }">

    <div class="shadow">
        <div class="px-4 py-1 mb-3 whitespace-nowrap text-lg font-medium text-gray-200">
            <div class="grid grid-cols-2 leading-tight">
                <div x-text="translations.race_position">Koht</div>
                <div class="text-right font-light"><span x-text="position">0</span>/<span x-text="participants">0</span></div>
                <div x-text="translations.race_lap">Ring</div>
                <div class="text-right font-light" x-text="laps">0/0</div>
                <div x-text="translations.race_cp">Punkt</div>
                <div class="text-right font-light" x-text="checkpoints">0/0</div>

                <div x-show="trackType == 'SPRINT'" x-text="translations.race_time"></div>
                <div X-show="trackType == 'SPRINT'" class="text-right font-light" x-text="totalTime">00:00.00</div>

                <div x-show="trackType == 'CIRCUIT'" class="text-sm mt-3" x-text="translations.race_current_lap"></div>
                <div x-show="trackType == 'CIRCUIT'" class="text-right font-light text-sm mt-3" x-text="currentTime">00:00.00</div>

                <div x-show="trackType == 'CIRCUIT'" class="text-sm" x-text="translations.race_best_lap"></div>
                <div x-show="trackType == 'CIRCUIT'" class="text-right font-light text-sm" x-text="bestTime">00:00.00</div>

                <div x-show="trackType == 'CIRCUIT'" class="text-sm" x-text="translations.race_total_time"></div>
                <div x-show="trackType == 'CIRCUIT'" class="text-right font-light text-sm" x-text="totalTime">00:00.00</div>
            </div>
        </div>

        <table class="table-fixed w-full border-separate [border-spacing:0.25rem]">
            <tbody>
            <tr>
                <td class="flex items-center px-3 py-0 font-medium text-lg text-gray-200 leading-5">
                    <span class="py-0.5 rounded-full text-xs font-medium bg-gray-200 text-gray-800" style="padding-left: 0.56rem; padding-right: 0.56rem;">1</span>
                    <span class="font-light pl-2 truncate" x-text="lbFirst"></span>
                </td>
            </tr>
            <tr>
                <td class="flex items-center px-3 py-0 font-medium text-lg text-gray-200 leading-5">
                    <span class="px-2 py-0.5 rounded-full text-xs font-medium bg-gray-200 text-gray-800">2</span>
                    <span class="font-light pl-2 truncate" x-text="lbSecond"></span>
                </td>
            </tr>
            <tr>
                <td class="flex items-center px-3 py-0 font-medium text-lg text-gray-200 leading-5">
                    <span class="px-2 py-0.5 rounded-full text-xs font-medium bg-gray-200 text-gray-800">3</span>
                    <span class="font-light pl-2 truncate" x-text="lbThird"></span>
                </td>
            </tr>
            <tr>
                <td class="flex items-center px-3 pt-4 pb-2 whitespace-nowrap font-medium text-lg text-gray-200 leading-4">
                    <div class="truncate py-1">
                        <i class="fas fa-user"></i>
                        <span class="font-light font-bold pl-2" x-text="alias"></span>
                    </div>
                </td>
            </tr>
            </tbody>
        </table>
    </div>
</div>
</body>
</html>